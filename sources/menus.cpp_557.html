
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>menus.cpp</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">//=============================================================================</a>
<a name="ln2">//  MuseScore</a>
<a name="ln3">//  Linux Music Score Editor</a>
<a name="ln4">//</a>
<a name="ln5">//  Copyright (C) 2002-2016 Werner Schweer and others</a>
<a name="ln6">//</a>
<a name="ln7">//  This program is free software; you can redistribute it and/or modify</a>
<a name="ln8">//  it under the terms of the GNU General Public License version 2.</a>
<a name="ln9">//</a>
<a name="ln10">//  This program is distributed in the hope that it will be useful,</a>
<a name="ln11">//  but WITHOUT ANY WARRANTY; without even the implied warranty of</a>
<a name="ln12">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</a>
<a name="ln13">//  GNU General Public License for more details.</a>
<a name="ln14">//</a>
<a name="ln15">//  You should have received a copy of the GNU General Public License</a>
<a name="ln16">//  along with this program; if not, write to the Free Software</a>
<a name="ln17">//  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</a>
<a name="ln18">//=============================================================================</a>
<a name="ln19"> </a>
<a name="ln20">// For menus in the menu bar, like File, Edit, and View, see mscore/musescore.cpp</a>
<a name="ln21"> </a>
<a name="ln22">#include &quot;menus.h&quot;</a>
<a name="ln23">#include &lt;tuple&gt;</a>
<a name="ln24">#include &quot;libmscore/score.h&quot;</a>
<a name="ln25">#include &quot;palette.h&quot;</a>
<a name="ln26">#include &quot;libmscore/note.h&quot;</a>
<a name="ln27">#include &quot;libmscore/chordrest.h&quot;</a>
<a name="ln28">#include &quot;libmscore/dynamic.h&quot;</a>
<a name="ln29">#include &quot;libmscore/slur.h&quot;</a>
<a name="ln30">#include &quot;libmscore/sym.h&quot;</a>
<a name="ln31">#include &quot;libmscore/hairpin.h&quot;</a>
<a name="ln32">#include &quot;scoreview.h&quot;</a>
<a name="ln33">#include &quot;musescore.h&quot;</a>
<a name="ln34">#include &quot;libmscore/select.h&quot;</a>
<a name="ln35">#include &quot;libmscore/tempo.h&quot;</a>
<a name="ln36">#include &quot;libmscore/segment.h&quot;</a>
<a name="ln37">#include &quot;libmscore/undo.h&quot;</a>
<a name="ln38">#include &quot;icons.h&quot;</a>
<a name="ln39">#include &quot;libmscore/bracket.h&quot;</a>
<a name="ln40">#include &quot;libmscore/ottava.h&quot;</a>
<a name="ln41">#include &quot;libmscore/textline.h&quot;</a>
<a name="ln42">#include &quot;libmscore/trill.h&quot;</a>
<a name="ln43">#include &quot;libmscore/pedal.h&quot;</a>
<a name="ln44">#include &quot;libmscore/clef.h&quot;</a>
<a name="ln45">#include &quot;libmscore/timesig.h&quot;</a>
<a name="ln46">#include &quot;libmscore/barline.h&quot;</a>
<a name="ln47">#include &quot;libmscore/layoutbreak.h&quot;</a>
<a name="ln48">#include &quot;symboldialog.h&quot;</a>
<a name="ln49">#include &quot;libmscore/volta.h&quot;</a>
<a name="ln50">#include &quot;libmscore/keysig.h&quot;</a>
<a name="ln51">#include &quot;libmscore/breath.h&quot;</a>
<a name="ln52">#include &quot;libmscore/arpeggio.h&quot;</a>
<a name="ln53">#include &quot;libmscore/tremolo.h&quot;</a>
<a name="ln54">#include &quot;libmscore/repeat.h&quot;</a>
<a name="ln55">#include &quot;libmscore/tempotext.h&quot;</a>
<a name="ln56">#include &quot;libmscore/glissando.h&quot;</a>
<a name="ln57">#include &quot;libmscore/articulation.h&quot;</a>
<a name="ln58">#include &quot;libmscore/chord.h&quot;</a>
<a name="ln59">#include &quot;libmscore/drumset.h&quot;</a>
<a name="ln60">#include &quot;libmscore/spacer.h&quot;</a>
<a name="ln61">#include &quot;libmscore/measure.h&quot;</a>
<a name="ln62">#include &quot;libmscore/fret.h&quot;</a>
<a name="ln63">#include &quot;libmscore/staffstate.h&quot;</a>
<a name="ln64">#include &quot;libmscore/fingering.h&quot;</a>
<a name="ln65">#include &quot;libmscore/bend.h&quot;</a>
<a name="ln66">#include &quot;libmscore/tremolobar.h&quot;</a>
<a name="ln67">#include &quot;libmscore/chordline.h&quot;</a>
<a name="ln68">#include &quot;libmscore/stafftext.h&quot;</a>
<a name="ln69">#include &quot;libmscore/systemtext.h&quot;</a>
<a name="ln70">#include &quot;libmscore/instrchange.h&quot;</a>
<a name="ln71">#include &quot;workspace.h&quot;</a>
<a name="ln72">#include &quot;libmscore/icon.h&quot;</a>
<a name="ln73">#include &quot;libmscore/accidental.h&quot;</a>
<a name="ln74">#include &quot;libmscore/harmony.h&quot;</a>
<a name="ln75">#include &quot;libmscore/rehearsalmark.h&quot;</a>
<a name="ln76">#include &quot;shortcut.h&quot;</a>
<a name="ln77">#include &quot;libmscore/marker.h&quot;</a>
<a name="ln78">#include &quot;libmscore/jump.h&quot;</a>
<a name="ln79">#include &quot;libmscore/bagpembell.h&quot;</a>
<a name="ln80">#include &quot;libmscore/ambitus.h&quot;</a>
<a name="ln81">#include &quot;libmscore/stafftypechange.h&quot;</a>
<a name="ln82">#include &quot;libmscore/letring.h&quot;</a>
<a name="ln83">#include &quot;libmscore/vibrato.h&quot;</a>
<a name="ln84">#include &quot;libmscore/palmmute.h&quot;</a>
<a name="ln85">#include &quot;libmscore/fermata.h&quot;</a>
<a name="ln86"> </a>
<a name="ln87">#include &quot;palette/palettetree.h&quot;</a>
<a name="ln88">#include &quot;palette/palettewidget.h&quot;</a>
<a name="ln89">#include &quot;palette/paletteworkspace.h&quot;</a>
<a name="ln90">#include &quot;qml/msqmlengine.h&quot;</a>
<a name="ln91"> </a>
<a name="ln92">namespace Ms {</a>
<a name="ln93"> </a>
<a name="ln94">extern bool useFactorySettings;</a>
<a name="ln95"> </a>
<a name="ln96">static Palette* toPalette(PalettePanel* pp)</a>
<a name="ln97">      {</a>
<a name="ln98">      return new Palette(std::unique_ptr&lt;PalettePanel&gt;(pp));</a>
<a name="ln99">      }</a>
<a name="ln100"> </a>
<a name="ln101">//---------------------------------------------------------</a>
<a name="ln102">//   populateIconPalette</a>
<a name="ln103">//---------------------------------------------------------</a>
<a name="ln104"> </a>
<a name="ln105">void populateIconPalette(Palette* p, const IconAction* a)</a>
<a name="ln106">      {</a>
<a name="ln107">      while (a-&gt;subtype != IconType::NONE) {</a>
<a name="ln108">            Icon* ik = new Icon(gscore);</a>
<a name="ln109">            ik-&gt;setIconType(a-&gt;subtype);</a>
<a name="ln110">            const Shortcut* s = Shortcut::getShortcut(a-&gt;action);</a>
<a name="ln111">            QAction* action = s-&gt;action();</a>
<a name="ln112">            QIcon icon(action-&gt;icon());</a>
<a name="ln113">            ik-&gt;setAction(a-&gt;action, icon);</a>
<a name="ln114">            p-&gt;append(ik, s-&gt;help());</a>
<a name="ln115">            ++a;</a>
<a name="ln116">            }</a>
<a name="ln117">      }</a>
<a name="ln118"> </a>
<a name="ln119">//---------------------------------------------------------</a>
<a name="ln120">//   newBeamPalette</a>
<a name="ln121">//---------------------------------------------------------</a>
<a name="ln122"> </a>
<a name="ln123">Palette* MuseScore::newBeamPalette()</a>
<a name="ln124">      {</a>
<a name="ln125">      return toPalette(newBeamPalettePanel());</a>
<a name="ln126">      }</a>
<a name="ln127"> </a>
<a name="ln128">//---------------------------------------------------------</a>
<a name="ln129">//   newFramePalette</a>
<a name="ln130">//---------------------------------------------------------</a>
<a name="ln131"> </a>
<a name="ln132">Palette* MuseScore::newFramePalette()</a>
<a name="ln133">      {</a>
<a name="ln134">      return toPalette(newFramePalettePanel());</a>
<a name="ln135">      }</a>
<a name="ln136"> </a>
<a name="ln137">//---------------------------------------------------------</a>
<a name="ln138">//   newDynamicsPalette</a>
<a name="ln139">//---------------------------------------------------------</a>
<a name="ln140"> </a>
<a name="ln141">Palette* MuseScore::newDynamicsPalette(bool defaultPalette)</a>
<a name="ln142">      {</a>
<a name="ln143">      return toPalette(newDynamicsPalettePanel(defaultPalette));</a>
<a name="ln144">      }</a>
<a name="ln145"> </a>
<a name="ln146">//---------------------------------------------------------</a>
<a name="ln147">//   newKeySigPalette</a>
<a name="ln148">//---------------------------------------------------------</a>
<a name="ln149"> </a>
<a name="ln150">Palette* MuseScore::newKeySigPalette()</a>
<a name="ln151">      {</a>
<a name="ln152">      return toPalette(newKeySigPalettePanel());</a>
<a name="ln153">      }</a>
<a name="ln154"> </a>
<a name="ln155">//---------------------------------------------------------</a>
<a name="ln156">//   newAccidentalsPalette</a>
<a name="ln157">//---------------------------------------------------------</a>
<a name="ln158"> </a>
<a name="ln159">Palette* MuseScore::newAccidentalsPalette(bool defaultPalette)</a>
<a name="ln160">      {</a>
<a name="ln161">      return toPalette(newAccidentalsPalettePanel(defaultPalette));</a>
<a name="ln162">      }</a>
<a name="ln163"> </a>
<a name="ln164">//---------------------------------------------------------</a>
<a name="ln165">//   newBarLinePalette</a>
<a name="ln166">//---------------------------------------------------------</a>
<a name="ln167"> </a>
<a name="ln168">Palette* MuseScore::newBarLinePalette()</a>
<a name="ln169">      {</a>
<a name="ln170">      return toPalette(newBarLinePalettePanel());</a>
<a name="ln171">      }</a>
<a name="ln172"> </a>
<a name="ln173">//---------------------------------------------------------</a>
<a name="ln174">//   newRepeatsPalette</a>
<a name="ln175">//---------------------------------------------------------</a>
<a name="ln176"> </a>
<a name="ln177">Palette* MuseScore::newRepeatsPalette()</a>
<a name="ln178">      {</a>
<a name="ln179">      return toPalette(newRepeatsPalettePanel());</a>
<a name="ln180">      }</a>
<a name="ln181"> </a>
<a name="ln182">//---------------------------------------------------------</a>
<a name="ln183">//   newBreaksPalette</a>
<a name="ln184">//---------------------------------------------------------</a>
<a name="ln185"> </a>
<a name="ln186">Palette* MuseScore::newBreaksPalette()</a>
<a name="ln187">      {</a>
<a name="ln188">      return toPalette(newBreaksPalettePanel());</a>
<a name="ln189">      }</a>
<a name="ln190"> </a>
<a name="ln191">//---------------------------------------------------------</a>
<a name="ln192">//   newFingeringPalette</a>
<a name="ln193">//---------------------------------------------------------</a>
<a name="ln194"> </a>
<a name="ln195">Palette* MuseScore::newFingeringPalette()</a>
<a name="ln196">      {</a>
<a name="ln197">      return toPalette(newFingeringPalettePanel());</a>
<a name="ln198">      }</a>
<a name="ln199"> </a>
<a name="ln200">//---------------------------------------------------------</a>
<a name="ln201">//   newTremoloPalette</a>
<a name="ln202">//---------------------------------------------------------</a>
<a name="ln203"> </a>
<a name="ln204">Palette* MuseScore::newTremoloPalette()</a>
<a name="ln205">      {</a>
<a name="ln206">      return toPalette(newTremoloPalettePanel());</a>
<a name="ln207">      }</a>
<a name="ln208"> </a>
<a name="ln209">//---------------------------------------------------------</a>
<a name="ln210">//   newNoteHeadsPalette</a>
<a name="ln211">//---------------------------------------------------------</a>
<a name="ln212"> </a>
<a name="ln213">Palette* MuseScore::newNoteHeadsPalette()</a>
<a name="ln214">      {</a>
<a name="ln215">      return toPalette(newNoteHeadsPalettePanel());</a>
<a name="ln216">      }</a>
<a name="ln217"> </a>
<a name="ln218">//---------------------------------------------------------</a>
<a name="ln219">//   newArticulationsPalette</a>
<a name="ln220">//---------------------------------------------------------</a>
<a name="ln221"> </a>
<a name="ln222">Palette* MuseScore::newArticulationsPalette()</a>
<a name="ln223">      {</a>
<a name="ln224">      return toPalette(newArticulationsPalettePanel());</a>
<a name="ln225">      }</a>
<a name="ln226"> </a>
<a name="ln227">//---------------------------------------------------------</a>
<a name="ln228">//   newOrnamentsPalette</a>
<a name="ln229">//---------------------------------------------------------</a>
<a name="ln230"> </a>
<a name="ln231">Palette* MuseScore::newOrnamentsPalette()</a>
<a name="ln232">      {</a>
<a name="ln233">      return toPalette(newOrnamentsPalettePanel());</a>
<a name="ln234">      }</a>
<a name="ln235"> </a>
<a name="ln236">//---------------------------------------------------------</a>
<a name="ln237">//   newAccordionPalette</a>
<a name="ln238">//---------------------------------------------------------</a>
<a name="ln239"> </a>
<a name="ln240">Palette* MuseScore::newAccordionPalette()</a>
<a name="ln241">      {</a>
<a name="ln242">      return toPalette(newAccordionPalettePanel());</a>
<a name="ln243">      }</a>
<a name="ln244"> </a>
<a name="ln245">//---------------------------------------------------------</a>
<a name="ln246">//   newBracketsPalette</a>
<a name="ln247">//---------------------------------------------------------</a>
<a name="ln248"> </a>
<a name="ln249">Palette* MuseScore::newBracketsPalette()</a>
<a name="ln250">      {</a>
<a name="ln251">      return toPalette(newBracketsPalettePanel());</a>
<a name="ln252">      }</a>
<a name="ln253"> </a>
<a name="ln254">//---------------------------------------------------------</a>
<a name="ln255">//   newBreathPalette</a>
<a name="ln256">//---------------------------------------------------------</a>
<a name="ln257"> </a>
<a name="ln258">Palette* MuseScore::newBreathPalette()</a>
<a name="ln259">      {</a>
<a name="ln260">      return toPalette(newBreathPalettePanel());</a>
<a name="ln261">      }</a>
<a name="ln262"> </a>
<a name="ln263">//---------------------------------------------------------</a>
<a name="ln264">//   newArpeggioPalette</a>
<a name="ln265">//---------------------------------------------------------</a>
<a name="ln266"> </a>
<a name="ln267">Palette* MuseScore::newArpeggioPalette()</a>
<a name="ln268">      {</a>
<a name="ln269">      return toPalette(newArpeggioPalettePanel());</a>
<a name="ln270">      }</a>
<a name="ln271"> </a>
<a name="ln272">//---------------------------------------------------------</a>
<a name="ln273">//   newClefsPalette</a>
<a name="ln274">//---------------------------------------------------------</a>
<a name="ln275"> </a>
<a name="ln276">Palette* MuseScore::newClefsPalette(bool defaultPalette)</a>
<a name="ln277">      {</a>
<a name="ln278">      return toPalette(newClefsPalettePanel(defaultPalette));</a>
<a name="ln279">      }</a>
<a name="ln280"> </a>
<a name="ln281">//---------------------------------------------------------</a>
<a name="ln282">//   newGraceNotePalette</a>
<a name="ln283">//---------------------------------------------------------</a>
<a name="ln284"> </a>
<a name="ln285">Palette* MuseScore::newGraceNotePalette()</a>
<a name="ln286">      {</a>
<a name="ln287">      return toPalette(newGraceNotePalettePanel());</a>
<a name="ln288">      }</a>
<a name="ln289"> </a>
<a name="ln290">//---------------------------------------------------------</a>
<a name="ln291">//   newBagpipeEmbellishmentPalette</a>
<a name="ln292">//---------------------------------------------------------</a>
<a name="ln293"> </a>
<a name="ln294">Palette* MuseScore::newBagpipeEmbellishmentPalette()</a>
<a name="ln295">      {</a>
<a name="ln296">      return toPalette(newBagpipeEmbellishmentPalettePanel());</a>
<a name="ln297">      }</a>
<a name="ln298"> </a>
<a name="ln299">//---------------------------------------------------------</a>
<a name="ln300">//   newLinesPalette</a>
<a name="ln301">//---------------------------------------------------------</a>
<a name="ln302"> </a>
<a name="ln303">Palette* MuseScore::newLinesPalette()</a>
<a name="ln304">      {</a>
<a name="ln305">      return toPalette(newLinesPalettePanel());</a>
<a name="ln306">      }</a>
<a name="ln307"> </a>
<a name="ln308">//---------------------------------------------------------</a>
<a name="ln309">//   showPalette</a>
<a name="ln310">//---------------------------------------------------------</a>
<a name="ln311"> </a>
<a name="ln312">void MuseScore::showPalette(bool visible)</a>
<a name="ln313">      {</a>
<a name="ln314">      QAction* a = getAction(&quot;toggle-palette&quot;);</a>
<a name="ln315">      if (!paletteWidget) {</a>
<a name="ln316">            WorkspacesManager::currentWorkspace()-&gt;read();</a>
<a name="ln317">            preferencesChanged();</a>
<a name="ln318">            updateIcons();</a>
<a name="ln319"> </a>
<a name="ln320">            paletteWidget = new PaletteWidget(getPaletteWorkspace(), getQmlUiEngine(), this);</a>
<a name="ln321">            a = getAction(&quot;toggle-palette&quot;);</a>
<a name="ln322">            connect(paletteWidget, &amp;PaletteWidget::visibilityChanged, a, &amp;QAction::setChecked);</a>
<a name="ln323">            addDockWidget(Qt::LeftDockWidgetArea, paletteWidget);</a>
<a name="ln324">            }</a>
<a name="ln325">      reDisplayDockWidget(paletteWidget, visible);</a>
<a name="ln326">      a-&gt;setChecked(visible);</a>
<a name="ln327">      }</a>
<a name="ln328"> </a>
<a name="ln329">//---------------------------------------------------------</a>
<a name="ln330">//   TempoPattern</a>
<a name="ln331">//---------------------------------------------------------</a>
<a name="ln332"> </a>
<a name="ln333">struct TempoPattern {</a>
<a name="ln334">      QString pattern;</a>
<a name="ln335">      double f;</a>
<a name="ln336">      bool relative;</a>
<a name="ln337">      bool italian;</a>
<a name="ln338">      bool followText;</a>
<a name="ln339">      bool basic;</a>
<a name="ln340">      bool masterOnly;</a>
<a name="ln341"> </a>
<a name="ln342">      TempoPattern(const QString&amp; s, double v, bool r, bool i, bool f, bool b, bool m) : pattern(s), f(v), relative(r), italian(i), followText(f), basic(b), masterOnly(m) {}</a>
<a name="ln343">      };</a>
<a name="ln344"> </a>
<a name="ln345">//---------------------------------------------------------</a>
<a name="ln346">//   newTempoPalette</a>
<a name="ln347">//---------------------------------------------------------</a>
<a name="ln348"> </a>
<a name="ln349">Palette* MuseScore::newTempoPalette(bool defaultPalette)</a>
<a name="ln350">      {</a>
<a name="ln351">      return toPalette(newTempoPalettePanel(defaultPalette));</a>
<a name="ln352">      }</a>
<a name="ln353"> </a>
<a name="ln354">//---------------------------------------------------------</a>
<a name="ln355">//   newTextPalette</a>
<a name="ln356">//---------------------------------------------------------</a>
<a name="ln357"> </a>
<a name="ln358">Palette* MuseScore::newTextPalette(bool defaultPalette)</a>
<a name="ln359">      {</a>
<a name="ln360">      return toPalette(newTextPalettePanel(defaultPalette));</a>
<a name="ln361">      }</a>
<a name="ln362"> </a>
<a name="ln363">//---------------------------------------------------------</a>
<a name="ln364">//   newTimePalette</a>
<a name="ln365">//    create default time signature palette</a>
<a name="ln366">//---------------------------------------------------------</a>
<a name="ln367"> </a>
<a name="ln368">Palette* MuseScore::newTimePalette()</a>
<a name="ln369">      {</a>
<a name="ln370">      return toPalette(newTimePalettePanel());</a>
<a name="ln371">      }</a>
<a name="ln372"> </a>
<a name="ln373">//---------------------------------------------------------</a>
<a name="ln374">//    newFretboardDiagramPalette</a>
<a name="ln375">//---------------------------------------------------------</a>
<a name="ln376"> </a>
<a name="ln377">Palette* MuseScore::newFretboardDiagramPalette()</a>
<a name="ln378">      {</a>
<a name="ln379">      return toPalette(newFretboardDiagramPalettePanel());</a>
<a name="ln380">      }</a>
<a name="ln381"> </a>
<a name="ln382">//---------------------------------------------------------</a>
<a name="ln383">//   newMasterPaletteTree</a>
<a name="ln384">//---------------------------------------------------------</a>
<a name="ln385"> </a>
<a name="ln386">PaletteTree* MuseScore::newMasterPaletteTree()</a>
<a name="ln387">      {</a>
<a name="ln388">      PaletteTree* tree = new PaletteTree();</a>
<a name="ln389"> </a>
<a name="ln390">      tree-&gt;append(MuseScore::newClefsPalettePanel());</a>
<a name="ln391">      tree-&gt;append(MuseScore::newKeySigPalettePanel());</a>
<a name="ln392">      tree-&gt;append(MuseScore::newTimePalettePanel());</a>
<a name="ln393"> </a>
<a name="ln394">      tree-&gt;append(MuseScore::newBracketsPalettePanel());</a>
<a name="ln395">      tree-&gt;append(MuseScore::newAccidentalsPalettePanel());</a>
<a name="ln396">      tree-&gt;append(MuseScore::newArticulationsPalettePanel());</a>
<a name="ln397">      tree-&gt;append(MuseScore::newOrnamentsPalettePanel());</a>
<a name="ln398">      tree-&gt;append(MuseScore::newBreathPalettePanel());</a>
<a name="ln399">      tree-&gt;append(MuseScore::newGraceNotePalettePanel());</a>
<a name="ln400">      tree-&gt;append(MuseScore::newNoteHeadsPalettePanel());</a>
<a name="ln401">      tree-&gt;append(MuseScore::newLinesPalettePanel());</a>
<a name="ln402">      tree-&gt;append(MuseScore::newBarLinePalettePanel());</a>
<a name="ln403">      tree-&gt;append(MuseScore::newArpeggioPalettePanel());</a>
<a name="ln404">      tree-&gt;append(MuseScore::newTremoloPalettePanel());</a>
<a name="ln405">      tree-&gt;append(MuseScore::newTextPalettePanel());</a>
<a name="ln406">      tree-&gt;append(MuseScore::newTempoPalettePanel());</a>
<a name="ln407">      tree-&gt;append(MuseScore::newDynamicsPalettePanel());</a>
<a name="ln408">      tree-&gt;append(MuseScore::newFingeringPalettePanel());</a>
<a name="ln409">      tree-&gt;append(MuseScore::newRepeatsPalettePanel());</a>
<a name="ln410">      tree-&gt;append(MuseScore::newFretboardDiagramPalettePanel());</a>
<a name="ln411">      tree-&gt;append(MuseScore::newAccordionPalettePanel());</a>
<a name="ln412">      tree-&gt;append(MuseScore::newBagpipeEmbellishmentPalettePanel());</a>
<a name="ln413">      tree-&gt;append(MuseScore::newBreaksPalettePanel());</a>
<a name="ln414">      tree-&gt;append(MuseScore::newFramePalettePanel());</a>
<a name="ln415">      tree-&gt;append(MuseScore::newBeamPalettePanel());</a>
<a name="ln416"> </a>
<a name="ln417">      return tree;</a>
<a name="ln418">      }</a>
<a name="ln419"> </a>
<a name="ln420">//---------------------------------------------------------</a>
<a name="ln421">//   populateIconPalettePanel</a>
<a name="ln422">//---------------------------------------------------------</a>
<a name="ln423"> </a>
<a name="ln424">static void populateIconPalettePanel(PalettePanel* p, const IconAction* a)</a>
<a name="ln425">      {</a>
<a name="ln426">      while (a-&gt;subtype != IconType::NONE) {</a>
<a name="ln427">            Icon* ik = new Icon(gscore);</a>
<a name="ln428">            ik-&gt;setIconType(a-&gt;subtype);</a>
<a name="ln429">            const Shortcut* s = Shortcut::getShortcut(a-&gt;action);</a>
<a name="ln430">            QAction* action = s-&gt;action();</a>
<a name="ln431">            QIcon icon(action-&gt;icon());</a>
<a name="ln432">            ik-&gt;setAction(a-&gt;action, icon);</a>
<a name="ln433">            p-&gt;append(ik, s-&gt;help());</a>
<a name="ln434">            ++a;</a>
<a name="ln435">            }</a>
<a name="ln436">      }</a>
<a name="ln437"> </a>
<a name="ln438">//---------------------------------------------------------</a>
<a name="ln439">//   newBeamPalettePanel</a>
<a name="ln440">//---------------------------------------------------------</a>
<a name="ln441"> </a>
<a name="ln442">PalettePanel* MuseScore::newBeamPalettePanel()</a>
<a name="ln443">      {</a>
<a name="ln444">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Beam);</a>
<a name="ln445">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Beam Properties&quot;));</a>
<a name="ln446">      sp-&gt;setGrid(27, 40);</a>
<a name="ln447">      sp-&gt;setDrawGrid(true);</a>
<a name="ln448"> </a>
<a name="ln449">      const IconAction bpa[] = {</a>
<a name="ln450">            { IconType::SBEAM,    &quot;beam-start&quot; },</a>
<a name="ln451">            { IconType::MBEAM,    &quot;beam-mid&quot; },</a>
<a name="ln452">            { IconType::NBEAM,    &quot;no-beam&quot; },</a>
<a name="ln453">            { IconType::BEAM32,   &quot;beam32&quot; },</a>
<a name="ln454">            { IconType::BEAM64,   &quot;beam64&quot; },</a>
<a name="ln455">            { IconType::AUTOBEAM, &quot;auto-beam&quot; },</a>
<a name="ln456">            { IconType::FBEAM1,   &quot;fbeam1&quot; },</a>
<a name="ln457">            { IconType::FBEAM2,   &quot;fbeam2&quot; },</a>
<a name="ln458">            { IconType::NONE,     &quot;&quot;}</a>
<a name="ln459">            };</a>
<a name="ln460"> </a>
<a name="ln461">      populateIconPalettePanel(sp, bpa);</a>
<a name="ln462">      return sp;</a>
<a name="ln463">      }</a>
<a name="ln464"> </a>
<a name="ln465">//---------------------------------------------------------</a>
<a name="ln466">//   newFramePalettePanel</a>
<a name="ln467">//---------------------------------------------------------</a>
<a name="ln468"> </a>
<a name="ln469">PalettePanel* MuseScore::newFramePalettePanel()</a>
<a name="ln470">      {</a>
<a name="ln471">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Frame);</a>
<a name="ln472">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Frames &amp; Measures&quot;));</a>
<a name="ln473">      sp-&gt;setGrid(27, 40);</a>
<a name="ln474">      sp-&gt;setDrawGrid(true);</a>
<a name="ln475"> </a>
<a name="ln476">      if (enableExperimental) {</a>
<a name="ln477">            static const IconAction bpa[] = {</a>
<a name="ln478">                  { IconType::VFRAME,   &quot;insert-vbox&quot; },</a>
<a name="ln479">                  { IconType::HFRAME,   &quot;insert-hbox&quot; },</a>
<a name="ln480">                  { IconType::TFRAME,   &quot;insert-textframe&quot; },</a>
<a name="ln481">                  { IconType::FFRAME,   &quot;insert-fretframe&quot; },    // experimental</a>
<a name="ln482">                  { IconType::MEASURE,  &quot;insert-measure&quot; },</a>
<a name="ln483">                  { IconType::NONE,     &quot;&quot;}</a>
<a name="ln484">                  };</a>
<a name="ln485">            populateIconPalettePanel(sp, bpa);</a>
<a name="ln486">            }</a>
<a name="ln487">      else {</a>
<a name="ln488">            static const IconAction bpa[] = {</a>
<a name="ln489">                  { IconType::VFRAME,   &quot;insert-vbox&quot; },</a>
<a name="ln490">                  { IconType::HFRAME,   &quot;insert-hbox&quot; },</a>
<a name="ln491">                  { IconType::TFRAME,   &quot;insert-textframe&quot; },</a>
<a name="ln492">                  { IconType::MEASURE,  &quot;insert-measure&quot; },</a>
<a name="ln493">                  { IconType::NONE,     &quot;&quot;}</a>
<a name="ln494">                };</a>
<a name="ln495">            populateIconPalettePanel(sp, bpa);</a>
<a name="ln496">            }</a>
<a name="ln497"> </a>
<a name="ln498">      return sp;</a>
<a name="ln499">      }</a>
<a name="ln500"> </a>
<a name="ln501">//---------------------------------------------------------</a>
<a name="ln502">//   newDynamicsPalettePanel</a>
<a name="ln503">//---------------------------------------------------------</a>
<a name="ln504"> </a>
<a name="ln505">PalettePanel* MuseScore::newDynamicsPalettePanel(bool defaultPalettePanel)</a>
<a name="ln506">      {</a>
<a name="ln507">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Dynamic);</a>
<a name="ln508">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Dynamics&quot;));</a>
<a name="ln509">      sp-&gt;setMag(.8);</a>
<a name="ln510">      sp-&gt;setDrawGrid(true);</a>
<a name="ln511"> </a>
<a name="ln512">      static const std::vector&lt;const char*&gt; array1 = {</a>
<a name="ln513">            &quot;pppppp&quot;, &quot;ppppp&quot;, &quot;pppp&quot;,</a>
<a name="ln514">            &quot;ppp&quot;, &quot;pp&quot;, &quot;p&quot;, &quot;mp&quot;, &quot;mf&quot;, &quot;f&quot;, &quot;ff&quot;, &quot;fff&quot;,</a>
<a name="ln515">            &quot;ffff&quot;, &quot;fffff&quot;, &quot;ffffff&quot;,</a>
<a name="ln516">            &quot;fp&quot;, &quot;pf&quot;, &quot;sf&quot;, &quot;sfz&quot;, &quot;sff&quot;, &quot;sffz&quot;, &quot;sfp&quot;, &quot;sfpp&quot;,</a>
<a name="ln517">            &quot;rfz&quot;, &quot;rf&quot;, &quot;fz&quot;, &quot;m&quot;, &quot;r&quot;, &quot;s&quot;, &quot;z&quot;, &quot;n&quot;</a>
<a name="ln518">            };</a>
<a name="ln519">      static const std::vector&lt;const char*&gt; arrayDefault = {</a>
<a name="ln520">            &quot;ppp&quot;, &quot;pp&quot;, &quot;p&quot;, &quot;mp&quot;, &quot;mf&quot;, &quot;f&quot;, &quot;ff&quot;, &quot;fff&quot;,</a>
<a name="ln521">            &quot;fp&quot;, &quot;pf&quot;, &quot;sf&quot;, &quot;sfz&quot;, &quot;sff&quot;, &quot;sffz&quot;, &quot;sfp&quot;, &quot;sfpp&quot;,</a>
<a name="ln522">            &quot;rfz&quot;, &quot;rf&quot;, &quot;fz&quot;, &quot;m&quot;, &quot;r&quot;, &quot;s&quot;, &quot;z&quot;, &quot;n&quot;</a>
<a name="ln523">            };</a>
<a name="ln524"> </a>
<a name="ln525">      const std::vector&lt;const char*&gt;* array = nullptr;</a>
<a name="ln526">      if (defaultPalettePanel) {</a>
<a name="ln527">            array = &amp;arrayDefault;</a>
<a name="ln528">            sp-&gt;setGrid(42, 28);</a>
<a name="ln529">            sp-&gt;setMoreElements(true);</a>
<a name="ln530">            }</a>
<a name="ln531">      else {</a>
<a name="ln532">            array = &amp;array1;</a>
<a name="ln533">            sp-&gt;setGrid(60, 28);</a>
<a name="ln534">            }</a>
<a name="ln535"> </a>
<a name="ln536">      for (const char* c :  *array) {</a>
<a name="ln537">            Dynamic* dynamic = new Dynamic(gscore);</a>
<a name="ln538">            dynamic-&gt;setDynamicType(c);</a>
<a name="ln539">            sp-&gt;append(dynamic, dynamic-&gt;dynamicTypeName());</a>
<a name="ln540">            }</a>
<a name="ln541">      return sp;</a>
<a name="ln542">      }</a>
<a name="ln543"> </a>
<a name="ln544">//---------------------------------------------------------</a>
<a name="ln545">//   newKeySigPalettePanel</a>
<a name="ln546">//---------------------------------------------------------</a>
<a name="ln547"> </a>
<a name="ln548">PalettePanel* MuseScore::newKeySigPalettePanel()</a>
<a name="ln549">      {</a>
<a name="ln550">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::KeySig);</a>
<a name="ln551">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Key Signatures&quot;));</a>
<a name="ln552">      sp-&gt;setMag(1.0);</a>
<a name="ln553">      sp-&gt;setGrid(56, 55);</a>
<a name="ln554">      sp-&gt;setYOffset(1.0);</a>
<a name="ln555"> </a>
<a name="ln556">      for (int i = 0; i &lt; 7; ++i) {</a>
<a name="ln557">            KeySig* k = new KeySig(gscore);</a>
<a name="ln558">            k-&gt;setKey(Key(i + 1));</a>
<a name="ln559">            sp-&gt;append(k, keyNames[i*2]);</a>
<a name="ln560">            }</a>
<a name="ln561">      for (int i = -7; i &lt; 0; ++i) {</a>
<a name="ln562">            KeySig* k = new KeySig(gscore);</a>
<a name="ln563">            k-&gt;setKey(Key(i));</a>
<a name="ln564">            sp-&gt;append(k, keyNames[(7 + i) * 2 + 1]);</a>
<a name="ln565">            }</a>
<a name="ln566">      KeySig* k = new KeySig(gscore);</a>
<a name="ln567">      k-&gt;setKey(Key::C);</a>
<a name="ln568">      sp-&gt;append(k, keyNames[14]);</a>
<a name="ln569"> </a>
<a name="ln570">      // atonal key signature</a>
<a name="ln571">      KeySigEvent nke;</a>
<a name="ln572">      nke.setKey(Key::C);</a>
<a name="ln573">      nke.setCustom(true);</a>
<a name="ln574">      nke.setMode(KeyMode::NONE);</a>
<a name="ln575">      KeySig* nk = new KeySig(gscore);</a>
<a name="ln576">      nk-&gt;setKeySigEvent(nke);</a>
<a name="ln577">      sp-&gt;append(nk, keyNames[15]);</a>
<a name="ln578"> </a>
<a name="ln579">      return sp;</a>
<a name="ln580">      }</a>
<a name="ln581"> </a>
<a name="ln582">//---------------------------------------------------------</a>
<a name="ln583">//   newAccidentalsPalettePanel</a>
<a name="ln584">//---------------------------------------------------------</a>
<a name="ln585"> </a>
<a name="ln586">PalettePanel* MuseScore::newAccidentalsPalettePanel(bool defaultPalettePanel)</a>
<a name="ln587">      {</a>
<a name="ln588">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Accidental);</a>
<a name="ln589">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Accidentals&quot;));</a>
<a name="ln590">      sp-&gt;setGrid(33, 36);</a>
<a name="ln591">      sp-&gt;setDrawGrid(true);</a>
<a name="ln592"> </a>
<a name="ln593">      int end = 0;</a>
<a name="ln594">      if (defaultPalettePanel)</a>
<a name="ln595">            end = int(AccidentalType::SHARP_SHARP);</a>
<a name="ln596">      else</a>
<a name="ln597">            end = int(AccidentalType::END);</a>
<a name="ln598"> </a>
<a name="ln599">      Accidental* a = new Accidental(gscore);</a>
<a name="ln600">      a-&gt;setAccidentalType(AccidentalType::NONE);</a>
<a name="ln601">      sp-&gt;append(a, a-&gt;subtypeUserName());</a>
<a name="ln602">      for (int i = int(AccidentalType::FLAT); i &lt; end; ++i) {</a>
<a name="ln603">            Accidental* ac = new Accidental(gscore);</a>
<a name="ln604">            ac-&gt;setAccidentalType(AccidentalType(i));</a>
<a name="ln605">            if (ac-&gt;symbol() != SymId::noSym)</a>
<a name="ln606">                  sp-&gt;append(ac, ac-&gt;subtypeUserName());</a>
<a name="ln607">            else</a>
<a name="ln608">                  delete ac;</a>
<a name="ln609">            }</a>
<a name="ln610"> </a>
<a name="ln611">      if (defaultPalettePanel) {</a>
<a name="ln612">            sp-&gt;setMoreElements(true);</a>
<a name="ln613">            }</a>
<a name="ln614"> </a>
<a name="ln615">      Icon* ik = new Icon(gscore);</a>
<a name="ln616">      ik-&gt;setIconType(IconType::BRACKETS);</a>
<a name="ln617">      const Shortcut* s = Shortcut::getShortcut(&quot;add-brackets&quot;);</a>
<a name="ln618">      QAction* action = s-&gt;action();</a>
<a name="ln619">      ik-&gt;setAction(QByteArray(&quot;add-brackets&quot;), action-&gt;icon());</a>
<a name="ln620">      sp-&gt;append(ik, s-&gt;help());</a>
<a name="ln621"> </a>
<a name="ln622">      ik = new Icon(gscore);</a>
<a name="ln623">      ik-&gt;setIconType(IconType::PARENTHESES);</a>
<a name="ln624">      s = Shortcut::getShortcut(&quot;add-parentheses&quot;);</a>
<a name="ln625">      action = s-&gt;action();</a>
<a name="ln626">      ik-&gt;setAction(QByteArray(&quot;add-parentheses&quot;), action-&gt;icon());</a>
<a name="ln627">      sp-&gt;append(ik, s-&gt;help());</a>
<a name="ln628"> </a>
<a name="ln629">      return sp;</a>
<a name="ln630">      }</a>
<a name="ln631"> </a>
<a name="ln632">//---------------------------------------------------------</a>
<a name="ln633">//   newBarLinePalettePanel</a>
<a name="ln634">//---------------------------------------------------------</a>
<a name="ln635"> </a>
<a name="ln636">PalettePanel* MuseScore::newBarLinePalettePanel()</a>
<a name="ln637">      {</a>
<a name="ln638">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::BarLine);</a>
<a name="ln639">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Barlines&quot;));</a>
<a name="ln640">      sp-&gt;setMag(0.8);</a>
<a name="ln641">      sp-&gt;setGrid(42, 38);</a>
<a name="ln642"> </a>
<a name="ln643">      // bar line styles</a>
<a name="ln644">      for (unsigned i = 0;; ++i) {</a>
<a name="ln645">            const BarLineTableItem* bti = BarLine::barLineTableItem(i);</a>
<a name="ln646">            if (!bti)</a>
<a name="ln647">                  break;</a>
<a name="ln648">            BarLine* b = new BarLine(gscore);</a>
<a name="ln649">            b-&gt;setBarLineType(bti-&gt;type);</a>
<a name="ln650">            sp-&gt;append(b, BarLine::userTypeName(bti-&gt;type));</a>
<a name="ln651">            }</a>
<a name="ln652"> </a>
<a name="ln653">      // bar line spans</a>
<a name="ln654">      struct {</a>
<a name="ln655">            int         from, to;</a>
<a name="ln656">            const char* userName;</a>
<a name="ln657">            } spans[] = {</a>
<a name="ln658">            { BARLINE_SPAN_TICK1_FROM, BARLINE_SPAN_TICK1_TO, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tick 1 span&quot;) },</a>
<a name="ln659">            { BARLINE_SPAN_TICK2_FROM, BARLINE_SPAN_TICK2_TO, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tick 2 span&quot;) },</a>
<a name="ln660">            { BARLINE_SPAN_SHORT1_FROM,BARLINE_SPAN_SHORT1_TO,QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Short 1 span&quot;) },</a>
<a name="ln661">            { BARLINE_SPAN_SHORT2_FROM,BARLINE_SPAN_SHORT2_TO,QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Short 2 span&quot;) },</a>
<a name="ln662">            };</a>
<a name="ln663">      for (auto span : spans) {</a>
<a name="ln664">            BarLine* b = new BarLine(gscore);</a>
<a name="ln665">            b-&gt;setBarLineType(BarLineType::NORMAL);</a>
<a name="ln666">            b-&gt;setSpanFrom(span.from);</a>
<a name="ln667">            b-&gt;setSpanTo(span.to);</a>
<a name="ln668">            sp-&gt;append(b, span.userName);</a>
<a name="ln669">            }</a>
<a name="ln670">      return sp;</a>
<a name="ln671">      }</a>
<a name="ln672"> </a>
<a name="ln673">//---------------------------------------------------------</a>
<a name="ln674">//   newRepeatsPalettePanel</a>
<a name="ln675">//---------------------------------------------------------</a>
<a name="ln676"> </a>
<a name="ln677">PalettePanel* MuseScore::newRepeatsPalettePanel()</a>
<a name="ln678">      {</a>
<a name="ln679">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Repeat);</a>
<a name="ln680">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Repeats &amp; Jumps&quot;));</a>
<a name="ln681">      sp-&gt;setMag(0.65);</a>
<a name="ln682">      sp-&gt;setGrid(75, 28);</a>
<a name="ln683">      sp-&gt;setDrawGrid(true);</a>
<a name="ln684"> </a>
<a name="ln685">      RepeatMeasure* rm = new RepeatMeasure(gscore);</a>
<a name="ln686">      sp-&gt;append(rm, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Repeat measure sign&quot;));</a>
<a name="ln687"> </a>
<a name="ln688">      for (int i = 0; i &lt; markerTypeTableSize(); i++) {</a>
<a name="ln689">            if (markerTypeTable[i].type == Marker::Type::CODETTA) //not in smufl</a>
<a name="ln690">                  continue;</a>
<a name="ln691"> </a>
<a name="ln692">            Marker* mk = new Marker(gscore);</a>
<a name="ln693">            mk-&gt;setMarkerType(markerTypeTable[i].type);</a>
<a name="ln694">            mk-&gt;styleChanged();</a>
<a name="ln695">            sp-&gt;append(mk, markerTypeTable[i].name);</a>
<a name="ln696">            }</a>
<a name="ln697"> </a>
<a name="ln698">      for (int i = 0; i &lt; jumpTypeTableSize(); i++) {</a>
<a name="ln699">            Jump* jp = new Jump(gscore);</a>
<a name="ln700">            jp-&gt;setJumpType(jumpTypeTable[i].type);</a>
<a name="ln701">            sp-&gt;append(jp, jumpTypeTable[i].userText);</a>
<a name="ln702">            }</a>
<a name="ln703"> </a>
<a name="ln704">      for (unsigned i = 0;; ++i) {</a>
<a name="ln705">            const BarLineTableItem* bti = BarLine::barLineTableItem(i);</a>
<a name="ln706">            if (!bti)</a>
<a name="ln707">                  break;</a>
<a name="ln708">            switch (bti-&gt;type) {</a>
<a name="ln709">                  case BarLineType::START_REPEAT:</a>
<a name="ln710">                  case BarLineType::END_REPEAT:</a>
<a name="ln711">                  case BarLineType::END_START_REPEAT:</a>
<a name="ln712">                        break;</a>
<a name="ln713">                  default:</a>
<a name="ln714">                        continue;</a>
<a name="ln715">                  }</a>
<a name="ln716"> </a>
<a name="ln717">            BarLine* b = new BarLine(gscore);</a>
<a name="ln718">            b-&gt;setBarLineType(bti-&gt;type);</a>
<a name="ln719">            PaletteCell* cell= sp-&gt;append(b, BarLine::userTypeName(bti-&gt;type));</a>
<a name="ln720">            cell-&gt;drawStaff = false;</a>
<a name="ln721">            }</a>
<a name="ln722"> </a>
<a name="ln723">      return sp;</a>
<a name="ln724">      }</a>
<a name="ln725"> </a>
<a name="ln726">//---------------------------------------------------------</a>
<a name="ln727">//   newBreaksPalettePanel</a>
<a name="ln728">//---------------------------------------------------------</a>
<a name="ln729"> </a>
<a name="ln730">PalettePanel* MuseScore::newBreaksPalettePanel()</a>
<a name="ln731">      {</a>
<a name="ln732">      qreal _spatium = gscore-&gt;spatium();</a>
<a name="ln733">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Break);</a>
<a name="ln734">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Breaks &amp; Spacers&quot;));</a>
<a name="ln735">      sp-&gt;setMag(1.0);</a>
<a name="ln736">      sp-&gt;setGrid(42, 36);</a>
<a name="ln737">      sp-&gt;setDrawGrid(true);</a>
<a name="ln738"> </a>
<a name="ln739">      struct BreakItem {</a>
<a name="ln740">            LayoutBreak b;</a>
<a name="ln741">            };</a>
<a name="ln742">      LayoutBreak* lb = new LayoutBreak(gscore);</a>
<a name="ln743">      lb-&gt;setLayoutBreakType(LayoutBreak::Type::LINE);</a>
<a name="ln744">      PaletteCell* cell = sp-&gt;append(lb, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;System break&quot;));</a>
<a name="ln745">      cell-&gt;mag = 1.2;</a>
<a name="ln746"> </a>
<a name="ln747">      lb = new LayoutBreak(gscore);</a>
<a name="ln748">      lb-&gt;setLayoutBreakType(LayoutBreak::Type::PAGE);</a>
<a name="ln749">      cell = sp-&gt;append(lb, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Page break&quot;));</a>
<a name="ln750">      cell-&gt;mag = 1.2;</a>
<a name="ln751"> </a>
<a name="ln752">      lb = new LayoutBreak(gscore);</a>
<a name="ln753">      lb-&gt;setLayoutBreakType(LayoutBreak::Type::SECTION);</a>
<a name="ln754">      cell = sp-&gt;append(lb, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Section break&quot;));</a>
<a name="ln755">      cell-&gt;mag = 1.2;</a>
<a name="ln756"> </a>
<a name="ln757">#if 0</a>
<a name="ln758">      lb = new LayoutBreak(gscore);</a>
<a name="ln759">      lb-&gt;setLayoutBreakType(LayoutBreak::Type::NOBREAK);</a>
<a name="ln760">      cell = sp-&gt;append(lb, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Don't break&quot;));</a>
<a name="ln761">      cell-&gt;mag = 1.2;</a>
<a name="ln762">#endif</a>
<a name="ln763"> </a>
<a name="ln764">      Spacer* spacer = new Spacer(gscore);</a>
<a name="ln765">      spacer-&gt;setSpacerType(SpacerType::DOWN);</a>
<a name="ln766">      spacer-&gt;setGap(3 * _spatium);</a>
<a name="ln767">      cell = sp-&gt;append(spacer, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff spacer down&quot;));</a>
<a name="ln768">      cell-&gt;mag = .7;</a>
<a name="ln769"> </a>
<a name="ln770">      spacer = new Spacer(gscore);</a>
<a name="ln771">      spacer-&gt;setSpacerType(SpacerType::UP);</a>
<a name="ln772">      spacer-&gt;setGap(3 * _spatium);</a>
<a name="ln773">      cell = sp-&gt;append(spacer, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff spacer up&quot;));</a>
<a name="ln774">      cell-&gt;mag = .7;</a>
<a name="ln775"> </a>
<a name="ln776">      spacer = new Spacer(gscore);</a>
<a name="ln777">      spacer-&gt;setSpacerType(SpacerType::FIXED);</a>
<a name="ln778">      spacer-&gt;setGap(3 * _spatium);</a>
<a name="ln779">      cell = sp-&gt;append(spacer, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff spacer fixed down&quot;));</a>
<a name="ln780">      cell-&gt;mag = .7;</a>
<a name="ln781"> </a>
<a name="ln782">      return sp;</a>
<a name="ln783">      }</a>
<a name="ln784"> </a>
<a name="ln785">//---------------------------------------------------------</a>
<a name="ln786">//   newFingeringPalettePanel</a>
<a name="ln787">//---------------------------------------------------------</a>
<a name="ln788"> </a>
<a name="ln789">PalettePanel* MuseScore::newFingeringPalettePanel()</a>
<a name="ln790">      {</a>
<a name="ln791">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Fingering);</a>
<a name="ln792">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Fingering&quot;));</a>
<a name="ln793">      sp-&gt;setMag(1.5);</a>
<a name="ln794">      sp-&gt;setGrid(28, 30);</a>
<a name="ln795">      sp-&gt;setDrawGrid(true);</a>
<a name="ln796"> </a>
<a name="ln797">      const char* finger = &quot;012345&quot;;</a>
<a name="ln798">      for (unsigned i = 0; i &lt; strlen(finger); ++i) {</a>
<a name="ln799">            Fingering* f = new Fingering(gscore);</a>
<a name="ln800">            f-&gt;setXmlText(QString(finger[i]));</a>
<a name="ln801">            sp-&gt;append(f, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Fingering %1&quot;));</a>
<a name="ln802">            }</a>
<a name="ln803">      finger = &quot;pimac&quot;;</a>
<a name="ln804">      for (unsigned i = 0; i &lt; strlen(finger); ++i) {</a>
<a name="ln805">            Fingering* f = new Fingering(gscore, Tid::RH_GUITAR_FINGERING);</a>
<a name="ln806">            f-&gt;setXmlText(QString(finger[i]));</a>
<a name="ln807">            sp-&gt;append(f, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;RH Guitar Fingering %1&quot;));</a>
<a name="ln808">            }</a>
<a name="ln809">      finger = &quot;012345T&quot;;</a>
<a name="ln810">      for (unsigned i = 0; i &lt; strlen(finger); ++i) {</a>
<a name="ln811">            Fingering* f = new Fingering(gscore, Tid::LH_GUITAR_FINGERING);</a>
<a name="ln812">            f-&gt;setXmlText(QString(finger[i]));</a>
<a name="ln813">            sp-&gt;append(f, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;LH Guitar Fingering %1&quot;));</a>
<a name="ln814">            }</a>
<a name="ln815">      finger = &quot;0123456&quot;;</a>
<a name="ln816">      for (unsigned i = 0; i &lt; strlen(finger); ++i) {</a>
<a name="ln817">            Fingering* f = new Fingering(gscore, Tid::STRING_NUMBER);</a>
<a name="ln818">            f-&gt;setXmlText(QString(finger[i]));</a>
<a name="ln819">            sp-&gt;append(f, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;String number %1&quot;));</a>
<a name="ln820">            }</a>
<a name="ln821"> </a>
<a name="ln822">      static const std::vector&lt;SymId&gt; lute {</a>
<a name="ln823">            SymId::stringsThumbPosition,</a>
<a name="ln824">            SymId::luteFingeringRHThumb, SymId::luteFingeringRHFirst,</a>
<a name="ln825">            SymId::luteFingeringRHSecond, SymId::luteFingeringRHThird</a>
<a name="ln826">            };</a>
<a name="ln827">      // include additional symbol-based fingerings (temporarily?) implemented as articulations</a>
<a name="ln828">      for (auto i : lute) {</a>
<a name="ln829">            Articulation* s = new Articulation(i, gscore);</a>
<a name="ln830">            sp-&gt;append(s, s-&gt;userName());</a>
<a name="ln831">            }</a>
<a name="ln832">      return sp;</a>
<a name="ln833">      }</a>
<a name="ln834"> </a>
<a name="ln835">//---------------------------------------------------------</a>
<a name="ln836">//   newTremoloPalettePanel</a>
<a name="ln837">//---------------------------------------------------------</a>
<a name="ln838"> </a>
<a name="ln839">PalettePanel* MuseScore::newTremoloPalettePanel()</a>
<a name="ln840">      {</a>
<a name="ln841">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Tremolo);</a>
<a name="ln842">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tremolos&quot;));</a>
<a name="ln843">      sp-&gt;setGrid(27, 40);</a>
<a name="ln844">      sp-&gt;setDrawGrid(true);</a>
<a name="ln845"> </a>
<a name="ln846">      for (int i = int(TremoloType::R8); i &lt;= int(TremoloType::C64); ++i) {</a>
<a name="ln847">            Tremolo* tremolo = new Tremolo(gscore);</a>
<a name="ln848">            tremolo-&gt;setTremoloType(TremoloType(i));</a>
<a name="ln849">            sp-&gt;append(tremolo, tremolo-&gt;subtypeName());</a>
<a name="ln850">            }</a>
<a name="ln851">      return sp;</a>
<a name="ln852">      }</a>
<a name="ln853"> </a>
<a name="ln854">//---------------------------------------------------------</a>
<a name="ln855">//   newNoteHeadsPalettePanel</a>
<a name="ln856">//---------------------------------------------------------</a>
<a name="ln857"> </a>
<a name="ln858">PalettePanel* MuseScore::newNoteHeadsPalettePanel()</a>
<a name="ln859">      {</a>
<a name="ln860">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::NoteHead);</a>
<a name="ln861">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Noteheads&quot;));</a>
<a name="ln862">      sp-&gt;setMag(1.3);</a>
<a name="ln863">      sp-&gt;setGrid(33, 36);</a>
<a name="ln864">      sp-&gt;setDrawGrid(true);</a>
<a name="ln865"> </a>
<a name="ln866">      for (int i = 0; i &lt; int(NoteHead::Group::HEAD_DO_WALKER); ++i) {</a>
<a name="ln867">            SymId sym = Note::noteHead(0, NoteHead::Group(i), NoteHead::Type::HEAD_HALF);</a>
<a name="ln868">            // HEAD_BREVIS_ALT shows up only for brevis value</a>
<a name="ln869">            if (i == int(NoteHead::Group::HEAD_BREVIS_ALT))</a>
<a name="ln870">                  sym = Note::noteHead(0, NoteHead::Group(i), NoteHead::Type::HEAD_BREVIS);</a>
<a name="ln871">            NoteHead* nh = new NoteHead(gscore);</a>
<a name="ln872">            nh-&gt;setSym(sym);</a>
<a name="ln873">            sp-&gt;append(nh, NoteHead::group2userName(NoteHead::Group(i)));</a>
<a name="ln874">            }</a>
<a name="ln875">      Icon* ik = new Icon(gscore);</a>
<a name="ln876">      ik-&gt;setIconType(IconType::PARENTHESES);</a>
<a name="ln877">      const Shortcut* s = Shortcut::getShortcut(&quot;add-parentheses&quot;);</a>
<a name="ln878">      QAction* action = s-&gt;action();</a>
<a name="ln879">      QIcon icon(action-&gt;icon());</a>
<a name="ln880">      ik-&gt;setAction(&quot;add-parentheses&quot;, icon);</a>
<a name="ln881">      sp-&gt;append(ik, s-&gt;help());</a>
<a name="ln882">      return sp;</a>
<a name="ln883">      }</a>
<a name="ln884"> </a>
<a name="ln885">//---------------------------------------------------------</a>
<a name="ln886">//   newArticulationsPalettePanel</a>
<a name="ln887">//---------------------------------------------------------</a>
<a name="ln888"> </a>
<a name="ln889">PalettePanel* MuseScore::newArticulationsPalettePanel()</a>
<a name="ln890">      {</a>
<a name="ln891">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Articulation);</a>
<a name="ln892">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Articulations&quot;));</a>
<a name="ln893">      sp-&gt;setGrid(42, 25);</a>
<a name="ln894">      sp-&gt;setDrawGrid(true);</a>
<a name="ln895"> </a>
<a name="ln896">      // do not include additional symbol-based fingerings (temporarily?) implemented as articulations</a>
<a name="ln897">      static const std::vector&lt;SymId&gt; fermatas {</a>
<a name="ln898">            SymId::fermataAbove,</a>
<a name="ln899">            SymId::fermataShortAbove,</a>
<a name="ln900">            SymId::fermataLongAbove,</a>
<a name="ln901">            SymId::fermataLongHenzeAbove,</a>
<a name="ln902">            SymId::fermataShortHenzeAbove,</a>
<a name="ln903">            SymId::fermataVeryLongAbove,</a>
<a name="ln904">            SymId::fermataVeryShortAbove,</a>
<a name="ln905">            };</a>
<a name="ln906">      for (auto i : fermatas) {</a>
<a name="ln907">            Fermata* f = new Fermata(i, gscore);</a>
<a name="ln908">            sp-&gt;append(f, f-&gt;userName());</a>
<a name="ln909">            }</a>
<a name="ln910">      static const std::vector&lt;SymId&gt; art {</a>
<a name="ln911">            SymId::articAccentAbove,</a>
<a name="ln912">            SymId::articStaccatoAbove,</a>
<a name="ln913">            SymId::articStaccatissimoAbove,</a>
<a name="ln914">            SymId::articTenutoAbove,</a>
<a name="ln915">            SymId::articTenutoStaccatoAbove,</a>
<a name="ln916">            SymId::articMarcatoAbove,</a>
<a name="ln917">            SymId::articAccentStaccatoAbove,</a>
<a name="ln918">            SymId::articLaissezVibrerAbove,</a>
<a name="ln919">            SymId::articMarcatoStaccatoAbove,</a>
<a name="ln920">            SymId::articMarcatoTenutoAbove,</a>
<a name="ln921">            SymId::articStaccatissimoStrokeAbove,</a>
<a name="ln922">            SymId::articStaccatissimoWedgeAbove,</a>
<a name="ln923">            SymId::articStressAbove,</a>
<a name="ln924">            SymId::articTenutoAccentAbove,</a>
<a name="ln925">            SymId::articUnstressAbove,</a>
<a name="ln926"> </a>
<a name="ln927">            SymId::articSoftAccentAbove,                    // supplemental articulations</a>
<a name="ln928">            SymId::articSoftAccentStaccatoAbove,</a>
<a name="ln929">            SymId::articSoftAccentTenutoAbove,</a>
<a name="ln930">            SymId::articSoftAccentTenutoStaccatoAbove,</a>
<a name="ln931"> </a>
<a name="ln932">            SymId::guitarFadeIn,</a>
<a name="ln933">            SymId::guitarFadeOut,</a>
<a name="ln934">            SymId::guitarVolumeSwell,</a>
<a name="ln935">            SymId::wiggleSawtooth,</a>
<a name="ln936">            SymId::wiggleSawtoothWide,</a>
<a name="ln937">            SymId::wiggleVibratoLargeFaster,</a>
<a name="ln938">            SymId::wiggleVibratoLargeSlowest,</a>
<a name="ln939">            SymId::brassMuteOpen,</a>
<a name="ln940">            SymId::brassMuteClosed,</a>
<a name="ln941">            SymId::stringsHarmonic,</a>
<a name="ln942">            SymId::stringsUpBow,</a>
<a name="ln943">            SymId::stringsDownBow,</a>
<a name="ln944">            SymId::pluckedSnapPizzicatoAbove,</a>
<a name="ln945">            // SymId::stringsThumbPosition,</a>
<a name="ln946">            // SymId::luteFingeringRHThumb,</a>
<a name="ln947">            // SymId::luteFingeringRHFirst,</a>
<a name="ln948">            // SymId::luteFingeringRHSecond,</a>
<a name="ln949">            // SymId::luteFingeringRHThird,</a>
<a name="ln950">            };</a>
<a name="ln951">      for (auto i : art) {</a>
<a name="ln952">            Articulation* s = new Articulation(i, gscore);</a>
<a name="ln953">            sp-&gt;append(s, s-&gt;userName());</a>
<a name="ln954">            }</a>
<a name="ln955">      Bend* bend = new Bend(gscore);</a>
<a name="ln956">      bend-&gt;points().append(PitchValue(0,    0, false));</a>
<a name="ln957">      bend-&gt;points().append(PitchValue(15, 100, false));</a>
<a name="ln958">      bend-&gt;points().append(PitchValue(60, 100, false));</a>
<a name="ln959">      sp-&gt;append(bend, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Bend&quot;));</a>
<a name="ln960"> </a>
<a name="ln961">      TremoloBar* tb = new TremoloBar(gscore);</a>
<a name="ln962">      tb-&gt;points().append(PitchValue(0,     0, false));     // &quot;Dip&quot;</a>
<a name="ln963">      tb-&gt;points().append(PitchValue(30, -100, false));</a>
<a name="ln964">      tb-&gt;points().append(PitchValue(60,    0, false));</a>
<a name="ln965">      sp-&gt;append(tb, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tremolo bar&quot;));</a>
<a name="ln966"> </a>
<a name="ln967">      return sp;</a>
<a name="ln968">      }</a>
<a name="ln969"> </a>
<a name="ln970">//---------------------------------------------------------</a>
<a name="ln971">//   newOrnamentsPalettePanel</a>
<a name="ln972">//---------------------------------------------------------</a>
<a name="ln973"> </a>
<a name="ln974">PalettePanel* MuseScore::newOrnamentsPalettePanel()</a>
<a name="ln975">      {</a>
<a name="ln976">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Ornament);</a>
<a name="ln977">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Ornaments&quot;));</a>
<a name="ln978">      sp-&gt;setGrid(42, 25);</a>
<a name="ln979">      sp-&gt;setDrawGrid(true);</a>
<a name="ln980"> </a>
<a name="ln981">      // do not include additional symbol-based fingerings (temporarily?) implemented as articulations</a>
<a name="ln982">      static const std::vector&lt;SymId&gt; art {</a>
<a name="ln983">            SymId::ornamentTurnInverted,</a>
<a name="ln984">            SymId::ornamentTurn,</a>
<a name="ln985">            SymId::ornamentTrill,</a>
<a name="ln986">            SymId::ornamentMordent,</a>
<a name="ln987">            SymId::ornamentMordentInverted,</a>
<a name="ln988">            SymId::ornamentTremblement,</a>
<a name="ln989">            SymId::ornamentPrallMordent,</a>
<a name="ln990">            SymId::ornamentUpPrall,</a>
<a name="ln991">            SymId::ornamentPrecompMordentUpperPrefix,       // SymId::ornamentDownPrall,</a>
<a name="ln992">            SymId::ornamentUpMordent,</a>
<a name="ln993">            SymId::ornamentDownMordent,</a>
<a name="ln994">            SymId::ornamentPrallDown,</a>
<a name="ln995">            SymId::ornamentPrallUp,</a>
<a name="ln996">            SymId::ornamentLinePrall,</a>
<a name="ln997">            SymId::ornamentPrecompSlide,</a>
<a name="ln998">            };</a>
<a name="ln999">      for (auto i : art) {</a>
<a name="ln1000">            Articulation* s = new Articulation(i, gscore);</a>
<a name="ln1001">            sp-&gt;append(s, s-&gt;userName());</a>
<a name="ln1002">            }</a>
<a name="ln1003">      return sp;</a>
<a name="ln1004">      }</a>
<a name="ln1005"> </a>
<a name="ln1006">//---------------------------------------------------------</a>
<a name="ln1007">//   newAccordionPalettePanel</a>
<a name="ln1008">//---------------------------------------------------------</a>
<a name="ln1009"> </a>
<a name="ln1010">PalettePanel* MuseScore::newAccordionPalettePanel()</a>
<a name="ln1011">      {</a>
<a name="ln1012">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Accordion);</a>
<a name="ln1013">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Accordion&quot;));</a>
<a name="ln1014">      sp-&gt;setGrid(42, 25);</a>
<a name="ln1015">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1016"> </a>
<a name="ln1017">      // do not include additional symbol-based fingerings (temporarily?) implemented as articulations</a>
<a name="ln1018">      static std::vector&lt;SymId&gt; art {</a>
<a name="ln1019">            SymId::accdnCombDot,</a>
<a name="ln1020">            SymId::accdnCombLH2RanksEmpty,</a>
<a name="ln1021">            SymId::accdnCombLH3RanksEmptySquare,</a>
<a name="ln1022">            SymId::accdnCombRH3RanksEmpty,</a>
<a name="ln1023">            SymId::accdnCombRH4RanksEmpty,</a>
<a name="ln1024">            SymId::accdnDiatonicClef,</a>
<a name="ln1025">            SymId::accdnLH2Ranks16Round,</a>
<a name="ln1026">            SymId::accdnLH2Ranks8Plus16Round,</a>
<a name="ln1027">            SymId::accdnLH2Ranks8Round,</a>
<a name="ln1028">            SymId::accdnLH2RanksFullMasterRound,</a>
<a name="ln1029"> </a>
<a name="ln1030">            SymId::accdnLH2RanksMasterPlus16Round,</a>
<a name="ln1031">            SymId::accdnLH2RanksMasterRound,</a>
<a name="ln1032">            SymId::accdnLH3Ranks2Plus8Square,</a>
<a name="ln1033">            SymId::accdnLH3Ranks2Square,</a>
<a name="ln1034">            SymId::accdnLH3Ranks8Square,</a>
<a name="ln1035">            SymId::accdnLH3RanksDouble8Square,</a>
<a name="ln1036">            SymId::accdnLH3RanksTuttiSquare,</a>
<a name="ln1037">            SymId::accdnPull,</a>
<a name="ln1038">            SymId::accdnPush,</a>
<a name="ln1039">            SymId::accdnRH3RanksAccordion,</a>
<a name="ln1040"> </a>
<a name="ln1041">            SymId::accdnRH3RanksAuthenticMusette,</a>
<a name="ln1042">            SymId::accdnRH3RanksBandoneon,</a>
<a name="ln1043">            SymId::accdnRH3RanksBassoon,</a>
<a name="ln1044">            SymId::accdnRH3RanksClarinet,</a>
<a name="ln1045">            SymId::accdnRH3RanksDoubleTremoloLower8ve,</a>
<a name="ln1046">            SymId::accdnRH3RanksDoubleTremoloUpper8ve,</a>
<a name="ln1047">            SymId::accdnRH3RanksFullFactory,</a>
<a name="ln1048">            SymId::accdnRH3RanksHarmonium,</a>
<a name="ln1049">            SymId::accdnRH3RanksImitationMusette,</a>
<a name="ln1050">            SymId::accdnRH3RanksLowerTremolo8,</a>
<a name="ln1051"> </a>
<a name="ln1052">            SymId::accdnRH3RanksMaster,</a>
<a name="ln1053">            SymId::accdnRH3RanksOboe,</a>
<a name="ln1054">            SymId::accdnRH3RanksOrgan,</a>
<a name="ln1055">            SymId::accdnRH3RanksPiccolo,</a>
<a name="ln1056">            SymId::accdnRH3RanksTremoloLower8ve,</a>
<a name="ln1057">            SymId::accdnRH3RanksTremoloUpper8ve,</a>
<a name="ln1058">            SymId::accdnRH3RanksTwoChoirs,</a>
<a name="ln1059">            SymId::accdnRH3RanksUpperTremolo8,</a>
<a name="ln1060">            SymId::accdnRH3RanksViolin,</a>
<a name="ln1061">            SymId::accdnRH4RanksAlto,</a>
<a name="ln1062"> </a>
<a name="ln1063">            SymId::accdnRH4RanksBassAlto,</a>
<a name="ln1064">            SymId::accdnRH4RanksMaster,</a>
<a name="ln1065">            SymId::accdnRH4RanksSoftBass,</a>
<a name="ln1066">            SymId::accdnRH4RanksSoftTenor,</a>
<a name="ln1067">            SymId::accdnRH4RanksSoprano,</a>
<a name="ln1068">            SymId::accdnRH4RanksTenor,</a>
<a name="ln1069">            SymId::accdnRicochet2,</a>
<a name="ln1070">            SymId::accdnRicochet3,</a>
<a name="ln1071">            SymId::accdnRicochet4,</a>
<a name="ln1072">            SymId::accdnRicochet5,</a>
<a name="ln1073"> </a>
<a name="ln1074">            SymId::accdnRicochet6,</a>
<a name="ln1075">            SymId::accdnRicochetStem2,</a>
<a name="ln1076">            SymId::accdnRicochetStem3,</a>
<a name="ln1077">            SymId::accdnRicochetStem4,</a>
<a name="ln1078">            SymId::accdnRicochetStem5,</a>
<a name="ln1079">            SymId::accdnRicochetStem6</a>
<a name="ln1080">            };</a>
<a name="ln1081">      for (auto i : art) {</a>
<a name="ln1082">            Symbol* s = new Symbol(gscore);</a>
<a name="ln1083">            s-&gt;setSym(i);</a>
<a name="ln1084">            sp-&gt;append(s, Sym::id2userName(i));</a>
<a name="ln1085">            }</a>
<a name="ln1086">      return sp;</a>
<a name="ln1087">      }</a>
<a name="ln1088"> </a>
<a name="ln1089">//---------------------------------------------------------</a>
<a name="ln1090">//   newBracketsPalettePanel</a>
<a name="ln1091">//---------------------------------------------------------</a>
<a name="ln1092"> </a>
<a name="ln1093">PalettePanel* MuseScore::newBracketsPalettePanel()</a>
<a name="ln1094">      {</a>
<a name="ln1095">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Bracket);</a>
<a name="ln1096">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Brackets&quot;));</a>
<a name="ln1097">      sp-&gt;setMag(0.7);</a>
<a name="ln1098">      sp-&gt;setGrid(40, 60);</a>
<a name="ln1099">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1100"> </a>
<a name="ln1101">      for (auto t : std::array&lt;std::pair&lt;BracketType,const char*&gt;, 4&gt; {</a>
<a name="ln1102">         {{ BracketType::NORMAL, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Bracket&quot;) },</a>
<a name="ln1103">          { BracketType::BRACE,  QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Brace&quot;)   },</a>
<a name="ln1104">          { BracketType::SQUARE, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Square&quot;)  },</a>
<a name="ln1105">          { BracketType::LINE,   QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Line&quot;)    }}</a>
<a name="ln1106">         } ) {</a>
<a name="ln1107">            Bracket* b1      = new Bracket(gscore);</a>
<a name="ln1108">            BracketItem* bi1 = new BracketItem(gscore);</a>
<a name="ln1109">            bi1-&gt;setBracketType(t.first);</a>
<a name="ln1110">            b1-&gt;setBracketItem(bi1);</a>
<a name="ln1111">            sp-&gt;append(b1, t.second);      // Bracket, Brace, Square, Line</a>
<a name="ln1112">            }</a>
<a name="ln1113">      return sp;</a>
<a name="ln1114">      }</a>
<a name="ln1115"> </a>
<a name="ln1116">//---------------------------------------------------------</a>
<a name="ln1117">//   newBreathPalettePanel</a>
<a name="ln1118">//---------------------------------------------------------</a>
<a name="ln1119"> </a>
<a name="ln1120">PalettePanel* MuseScore::newBreathPalettePanel()</a>
<a name="ln1121">      {</a>
<a name="ln1122">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Breath);</a>
<a name="ln1123">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Breaths &amp; Pauses&quot;));</a>
<a name="ln1124">      sp-&gt;setGrid(42, 40);</a>
<a name="ln1125">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1126">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1127"> </a>
<a name="ln1128">      for (BreathType bt : Breath::breathList) {</a>
<a name="ln1129">            Breath* a = new Breath(gscore);</a>
<a name="ln1130">            a-&gt;setSymId(bt.id);</a>
<a name="ln1131">            a-&gt;setPause(bt.pause);</a>
<a name="ln1132">            sp-&gt;append(a, Sym::id2userName(bt.id));</a>
<a name="ln1133">            }</a>
<a name="ln1134">      return sp;</a>
<a name="ln1135">      }</a>
<a name="ln1136"> </a>
<a name="ln1137">//---------------------------------------------------------</a>
<a name="ln1138">//   newArpeggioPalettePanel</a>
<a name="ln1139">//---------------------------------------------------------</a>
<a name="ln1140"> </a>
<a name="ln1141">PalettePanel* MuseScore::newArpeggioPalettePanel()</a>
<a name="ln1142">      {</a>
<a name="ln1143">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Arpeggio);</a>
<a name="ln1144">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Arpeggios &amp; Glissandi&quot;));</a>
<a name="ln1145">      sp-&gt;setGrid(27, 50);</a>
<a name="ln1146">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1147"> </a>
<a name="ln1148">      for (int i = 0; i &lt; 6; ++i) {</a>
<a name="ln1149">            Arpeggio* a = new Arpeggio(gscore);</a>
<a name="ln1150">            a-&gt;setArpeggioType(ArpeggioType(i));</a>
<a name="ln1151">            sp-&gt;append(a, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Arpeggio&quot;));</a>
<a name="ln1152">            }</a>
<a name="ln1153">      for (int i = 0; i &lt; 2; ++i) {</a>
<a name="ln1154">            Glissando* a = new Glissando(gscore);</a>
<a name="ln1155">            a-&gt;setGlissandoType(GlissandoType(i));</a>
<a name="ln1156">            sp-&gt;append(a, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Glissando&quot;));</a>
<a name="ln1157">            }</a>
<a name="ln1158"> </a>
<a name="ln1159">      //fall and doits</a>
<a name="ln1160"> </a>
<a name="ln1161">      ChordLine* cl = new ChordLine(gscore);</a>
<a name="ln1162">      cl-&gt;setChordLineType(ChordLineType::FALL);</a>
<a name="ln1163">      sp-&gt;append(cl, scorelineNames[0]);</a>
<a name="ln1164"> </a>
<a name="ln1165">      cl = new ChordLine(gscore);</a>
<a name="ln1166">      cl-&gt;setChordLineType(ChordLineType::DOIT);</a>
<a name="ln1167">      sp-&gt;append(cl, scorelineNames[1]);</a>
<a name="ln1168"> </a>
<a name="ln1169">      cl = new ChordLine(gscore);</a>
<a name="ln1170">      cl-&gt;setChordLineType(ChordLineType::PLOP);</a>
<a name="ln1171">      sp-&gt;append(cl, scorelineNames[2]);</a>
<a name="ln1172"> </a>
<a name="ln1173">      cl = new ChordLine(gscore);</a>
<a name="ln1174">      cl-&gt;setChordLineType(ChordLineType::SCOOP);</a>
<a name="ln1175">      sp-&gt;append(cl, scorelineNames[3]);</a>
<a name="ln1176"> </a>
<a name="ln1177">      cl = new ChordLine(gscore);</a>
<a name="ln1178">      cl-&gt;setChordLineType(ChordLineType::FALL);</a>
<a name="ln1179">      cl-&gt;setStraight(true);</a>
<a name="ln1180">      sp-&gt;append(cl, QT_TRANSLATE_NOOP(&quot;Ms&quot;, &quot;Slide out down&quot;));</a>
<a name="ln1181"> </a>
<a name="ln1182">      cl = new ChordLine(gscore);</a>
<a name="ln1183">      cl-&gt;setChordLineType(ChordLineType::DOIT);</a>
<a name="ln1184">      cl-&gt;setStraight(true);</a>
<a name="ln1185">      sp-&gt;append(cl, QT_TRANSLATE_NOOP(&quot;Ms&quot;, &quot;Slide out up&quot;));</a>
<a name="ln1186"> </a>
<a name="ln1187">      cl = new ChordLine(gscore);</a>
<a name="ln1188">      cl-&gt;setChordLineType(ChordLineType::PLOP);</a>
<a name="ln1189">      cl-&gt;setStraight(true);</a>
<a name="ln1190">      sp-&gt;append(cl, QT_TRANSLATE_NOOP(&quot;Ms&quot;, &quot;Slide in above&quot;));</a>
<a name="ln1191"> </a>
<a name="ln1192">      cl = new ChordLine(gscore);</a>
<a name="ln1193">      cl-&gt;setChordLineType(ChordLineType::SCOOP);</a>
<a name="ln1194">      cl-&gt;setStraight(true);</a>
<a name="ln1195">      sp-&gt;append(cl, QT_TRANSLATE_NOOP(&quot;Ms&quot;, &quot;Slide in below&quot;));</a>
<a name="ln1196"> </a>
<a name="ln1197">      return sp;</a>
<a name="ln1198">      }</a>
<a name="ln1199"> </a>
<a name="ln1200">//---------------------------------------------------------</a>
<a name="ln1201">//   newClefsPalettePanel</a>
<a name="ln1202">//---------------------------------------------------------</a>
<a name="ln1203"> </a>
<a name="ln1204">PalettePanel* MuseScore::newClefsPalettePanel(bool defaultPalettePanel)</a>
<a name="ln1205">      {</a>
<a name="ln1206">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Clef);</a>
<a name="ln1207">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Clefs&quot;));</a>
<a name="ln1208">      sp-&gt;setMag(0.8);</a>
<a name="ln1209">      sp-&gt;setGrid(35, 50);</a>
<a name="ln1210">      sp-&gt;setYOffset(1.0);</a>
<a name="ln1211"> </a>
<a name="ln1212">      static std::vector&lt;ClefType&gt; clefsDefault  {</a>
<a name="ln1213">            ClefType::G,     ClefType::G8_VA,  ClefType::G15_MA,  ClefType::G8_VB, ClefType::G15_MB, ClefType::G8_VB_O,</a>
<a name="ln1214">            ClefType::G8_VB_P,    ClefType::G_1,  ClefType::C1,  ClefType::C2,    ClefType::C3,</a>
<a name="ln1215">            ClefType::C4,    ClefType::C5, ClefType::F,   ClefType::F_8VA, ClefType::F_15MA,</a>
<a name="ln1216">            ClefType::F8_VB,    ClefType::F15_MB, ClefType::F_B, ClefType::F_C, ClefType::PERC,</a>
<a name="ln1217">            ClefType::PERC2, ClefType::TAB, ClefType::TAB4</a>
<a name="ln1218">            };</a>
<a name="ln1219">      static std::vector&lt;ClefType&gt; clefsMaster  {</a>
<a name="ln1220">            ClefType::G,     ClefType::G8_VA,  ClefType::G15_MA,  ClefType::G8_VB, ClefType::G15_MB, ClefType::G8_VB_O,</a>
<a name="ln1221">            ClefType::G8_VB_P,    ClefType::G_1,  ClefType::C1,  ClefType::C2,    ClefType::C3,</a>
<a name="ln1222">            ClefType::C4,    ClefType::C5,  ClefType::C_19C, ClefType::C1_F18C, ClefType::C3_F18C, ClefType::C4_F18C, ClefType::C1_F20C, ClefType::C3_F20C, ClefType::C4_F20C,</a>
<a name="ln1223">             ClefType::F,   ClefType::F_8VA, ClefType::F_15MA,</a>
<a name="ln1224">            ClefType::F8_VB,    ClefType::F15_MB, ClefType::F_B, ClefType::F_C, ClefType::F_F18C, ClefType::F_19C,  ClefType::PERC,</a>
<a name="ln1225">            ClefType::PERC2, ClefType::TAB, ClefType::TAB4, ClefType::TAB_SERIF, ClefType::TAB4_SERIF</a>
<a name="ln1226">            };</a>
<a name="ln1227"> </a>
<a name="ln1228">      std::vector&lt;ClefType&gt;* items = nullptr;</a>
<a name="ln1229">      if (defaultPalettePanel) {</a>
<a name="ln1230">            items = &amp;clefsDefault;</a>
<a name="ln1231">            sp-&gt;setMoreElements(true);</a>
<a name="ln1232">            }</a>
<a name="ln1233">      else {</a>
<a name="ln1234">            items = &amp;clefsMaster;</a>
<a name="ln1235">            sp-&gt;setMoreElements(false);</a>
<a name="ln1236">            }</a>
<a name="ln1237"> </a>
<a name="ln1238">      for (ClefType j : *items) {</a>
<a name="ln1239">            Clef* k = new Ms::Clef(gscore);</a>
<a name="ln1240">            k-&gt;setClefType(ClefTypeList(j, j));</a>
<a name="ln1241">            sp-&gt;append(k, ClefInfo::name(j));</a>
<a name="ln1242">            }</a>
<a name="ln1243">      return sp;</a>
<a name="ln1244">      }</a>
<a name="ln1245"> </a>
<a name="ln1246">//---------------------------------------------------------</a>
<a name="ln1247">//   newGraceNotePalettePanel</a>
<a name="ln1248">//---------------------------------------------------------</a>
<a name="ln1249"> </a>
<a name="ln1250">PalettePanel* MuseScore::newGraceNotePalettePanel()</a>
<a name="ln1251">      {</a>
<a name="ln1252">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::GraceNote);</a>
<a name="ln1253">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Grace Notes&quot;));</a>
<a name="ln1254">      sp-&gt;setGrid(32, 40);</a>
<a name="ln1255">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1256">      static const IconAction gna[] = {</a>
<a name="ln1257">            { IconType::ACCIACCATURA,  &quot;acciaccatura&quot; },</a>
<a name="ln1258">            { IconType::APPOGGIATURA,  &quot;appoggiatura&quot; },</a>
<a name="ln1259">            { IconType::GRACE4,        &quot;grace4&quot; },</a>
<a name="ln1260">            { IconType::GRACE16,       &quot;grace16&quot; },</a>
<a name="ln1261">            { IconType::GRACE32,       &quot;grace32&quot; },</a>
<a name="ln1262">            { IconType::GRACE8_AFTER,  &quot;grace8after&quot; },</a>
<a name="ln1263">            { IconType::GRACE16_AFTER, &quot;grace16after&quot; },</a>
<a name="ln1264">            { IconType::GRACE32_AFTER, &quot;grace32after&quot; },</a>
<a name="ln1265">            { IconType::NONE,          &quot;&quot; }</a>
<a name="ln1266">            };</a>
<a name="ln1267">      populateIconPalettePanel(sp, gna);</a>
<a name="ln1268">      return sp;</a>
<a name="ln1269">      }</a>
<a name="ln1270"> </a>
<a name="ln1271">//---------------------------------------------------------</a>
<a name="ln1272">//   newBagpipeEmbellishmentPalettePanel</a>
<a name="ln1273">//---------------------------------------------------------</a>
<a name="ln1274"> </a>
<a name="ln1275">PalettePanel* MuseScore::newBagpipeEmbellishmentPalettePanel()</a>
<a name="ln1276">      {</a>
<a name="ln1277">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::BagpipeEmbellishment);</a>
<a name="ln1278">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Bagpipe Embellishments&quot;));</a>
<a name="ln1279">      sp-&gt;setMag(0.8);</a>
<a name="ln1280">      sp-&gt;setYOffset(2.0);</a>
<a name="ln1281">      sp-&gt;setGrid(55, 55);</a>
<a name="ln1282">      for (int i = 0; i &lt; BagpipeEmbellishment::nEmbellishments(); ++i) {</a>
<a name="ln1283">            BagpipeEmbellishment* b  = new BagpipeEmbellishment(gscore);</a>
<a name="ln1284">            b-&gt;setEmbelType(i);</a>
<a name="ln1285">            sp-&gt;append(b, BagpipeEmbellishment::BagpipeEmbellishmentList[i].name);</a>
<a name="ln1286">            }</a>
<a name="ln1287"> </a>
<a name="ln1288">      return sp;</a>
<a name="ln1289">      }</a>
<a name="ln1290"> </a>
<a name="ln1291">//---------------------------------------------------------</a>
<a name="ln1292">//   newLinesPalettePanel</a>
<a name="ln1293">//---------------------------------------------------------</a>
<a name="ln1294"> </a>
<a name="ln1295">PalettePanel* MuseScore::newLinesPalettePanel()</a>
<a name="ln1296">      {</a>
<a name="ln1297">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Line);</a>
<a name="ln1298">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Lines&quot;));</a>
<a name="ln1299">      sp-&gt;setMag(.8);</a>
<a name="ln1300">      sp-&gt;setGrid(75, 28);</a>
<a name="ln1301">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1302"> </a>
<a name="ln1303">      qreal w = gscore-&gt;spatium() * 8;</a>
<a name="ln1304"> </a>
<a name="ln1305">      Slur* slur = new Slur(gscore);</a>
<a name="ln1306">      sp-&gt;append(slur, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Slur&quot;));</a>
<a name="ln1307"> </a>
<a name="ln1308">      Hairpin* gabel0 = new Hairpin(gscore);</a>
<a name="ln1309">      gabel0-&gt;setHairpinType(HairpinType::CRESC_HAIRPIN);</a>
<a name="ln1310">      gabel0-&gt;setLen(w);</a>
<a name="ln1311">      sp-&gt;append(gabel0, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Crescendo hairpin&quot;));</a>
<a name="ln1312"> </a>
<a name="ln1313">      Hairpin* gabel1 = new Hairpin(gscore);</a>
<a name="ln1314">      gabel1-&gt;setHairpinType(HairpinType::DECRESC_HAIRPIN);</a>
<a name="ln1315">      gabel1-&gt;setLen(w);</a>
<a name="ln1316">      sp-&gt;append(gabel1, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Diminuendo hairpin&quot;));</a>
<a name="ln1317"> </a>
<a name="ln1318">      Hairpin* gabel2 = new Hairpin(gscore);</a>
<a name="ln1319">      gabel2-&gt;setHairpinType(HairpinType::CRESC_LINE);</a>
<a name="ln1320">      gabel2-&gt;setLen(w);</a>
<a name="ln1321">      sp-&gt;append(gabel2, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Crescendo line&quot;));</a>
<a name="ln1322"> </a>
<a name="ln1323">      Hairpin* gabel3 = new Hairpin(gscore);</a>
<a name="ln1324">      gabel3-&gt;setHairpinType(HairpinType::DECRESC_LINE);</a>
<a name="ln1325">      gabel3-&gt;setLen(w);</a>
<a name="ln1326">      sp-&gt;append(gabel3, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Diminuendo line&quot;));</a>
<a name="ln1327"> </a>
<a name="ln1328">      Hairpin* gabel4 = new Hairpin(gscore);</a>
<a name="ln1329">      gabel4-&gt;setHairpinType(HairpinType::CRESC_HAIRPIN);</a>
<a name="ln1330">      gabel4-&gt;setBeginText(&quot;&lt;sym&gt;dynamicMezzo&lt;/sym&gt;&lt;sym&gt;dynamicForte&lt;/sym&gt;&quot;);</a>
<a name="ln1331">      gabel4-&gt;setPropertyFlags(Pid::BEGIN_TEXT, PropertyFlags::UNSTYLED);</a>
<a name="ln1332">      gabel4-&gt;setBeginTextAlign(Align::VCENTER);</a>
<a name="ln1333">      gabel4-&gt;setPropertyFlags(Pid::BEGIN_TEXT_ALIGN, PropertyFlags::UNSTYLED);</a>
<a name="ln1334">      gabel4-&gt;setLen(w);</a>
<a name="ln1335">      sp-&gt;append(gabel4, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Dynamic + hairpin&quot;));</a>
<a name="ln1336"> </a>
<a name="ln1337">      Volta* volta = new Volta(gscore);</a>
<a name="ln1338">      volta-&gt;setVoltaType(Volta::Type::CLOSED);</a>
<a name="ln1339">      volta-&gt;setLen(w);</a>
<a name="ln1340">      volta-&gt;setText(&quot;1.&quot;);</a>
<a name="ln1341">      QList&lt;int&gt; il;</a>
<a name="ln1342">      il.append(1);</a>
<a name="ln1343">      volta-&gt;setEndings(il);</a>
<a name="ln1344">      sp-&gt;append(volta, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Prima volta&quot;));</a>
<a name="ln1345"> </a>
<a name="ln1346">      volta = new Volta(gscore);</a>
<a name="ln1347">      volta-&gt;setVoltaType(Volta::Type::CLOSED);</a>
<a name="ln1348">      volta-&gt;setLen(w);</a>
<a name="ln1349">      volta-&gt;setText(&quot;2.&quot;);</a>
<a name="ln1350">      il.clear();</a>
<a name="ln1351">      il.append(2);</a>
<a name="ln1352">      volta-&gt;setEndings(il);</a>
<a name="ln1353">      sp-&gt;append(volta, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Seconda volta&quot;));</a>
<a name="ln1354"> </a>
<a name="ln1355">      volta = new Volta(gscore);</a>
<a name="ln1356">      volta-&gt;setVoltaType(Volta::Type::CLOSED);</a>
<a name="ln1357">      volta-&gt;setLen(w);</a>
<a name="ln1358">      volta-&gt;setText(&quot;3.&quot;);</a>
<a name="ln1359">      il.clear();</a>
<a name="ln1360">      il.append(3);</a>
<a name="ln1361">      volta-&gt;setEndings(il);</a>
<a name="ln1362">      sp-&gt;append(volta, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Terza volta&quot;));</a>
<a name="ln1363"> </a>
<a name="ln1364">      volta = new Volta(gscore);</a>
<a name="ln1365">      volta-&gt;setVoltaType(Volta::Type::OPEN);</a>
<a name="ln1366">      volta-&gt;setLen(w);</a>
<a name="ln1367">      volta-&gt;setText(&quot;2.&quot;);</a>
<a name="ln1368">      il.clear();</a>
<a name="ln1369">      il.append(2);</a>
<a name="ln1370">      volta-&gt;setEndings(il);</a>
<a name="ln1371">      sp-&gt;append(volta, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Seconda volta, open&quot;));</a>
<a name="ln1372"> </a>
<a name="ln1373">      Ottava* ottava = new Ottava(gscore);</a>
<a name="ln1374">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_8VA);</a>
<a name="ln1375">      ottava-&gt;setLen(w);</a>
<a name="ln1376">      ottava-&gt;styleChanged();</a>
<a name="ln1377">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;8va alta&quot;));</a>
<a name="ln1378"> </a>
<a name="ln1379">      ottava = new Ottava(gscore);</a>
<a name="ln1380">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_8VB);</a>
<a name="ln1381">      ottava-&gt;setLen(w);</a>
<a name="ln1382">      ottava-&gt;setPlacement(Placement::BELOW);</a>
<a name="ln1383">      ottava-&gt;styleChanged();</a>
<a name="ln1384">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;8va bassa&quot;));</a>
<a name="ln1385"> </a>
<a name="ln1386">      ottava = new Ottava(gscore);</a>
<a name="ln1387">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_15MA);</a>
<a name="ln1388">      ottava-&gt;setLen(w);</a>
<a name="ln1389">      ottava-&gt;styleChanged();</a>
<a name="ln1390">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;15ma alta&quot;));</a>
<a name="ln1391"> </a>
<a name="ln1392">      ottava = new Ottava(gscore);</a>
<a name="ln1393">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_15MB);</a>
<a name="ln1394">      ottava-&gt;setLen(w);</a>
<a name="ln1395">      ottava-&gt;setPlacement(Placement::BELOW);</a>
<a name="ln1396">      ottava-&gt;styleChanged();</a>
<a name="ln1397">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;15ma bassa&quot;));</a>
<a name="ln1398"> </a>
<a name="ln1399">      ottava = new Ottava(gscore);</a>
<a name="ln1400">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_22MA);</a>
<a name="ln1401">      ottava-&gt;setLen(w);</a>
<a name="ln1402">      ottava-&gt;styleChanged();</a>
<a name="ln1403">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;22ma alta&quot;));</a>
<a name="ln1404"> </a>
<a name="ln1405">      ottava = new Ottava(gscore);</a>
<a name="ln1406">      ottava-&gt;setOttavaType(OttavaType::OTTAVA_22MB);</a>
<a name="ln1407">      ottava-&gt;setLen(w);</a>
<a name="ln1408">      ottava-&gt;styleChanged();</a>
<a name="ln1409">      sp-&gt;append(ottava, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;22ma bassa&quot;));</a>
<a name="ln1410"> </a>
<a name="ln1411">      Pedal* pedal;</a>
<a name="ln1412">      pedal = new Pedal(gscore);</a>
<a name="ln1413">      pedal-&gt;setLen(w);</a>
<a name="ln1414">      pedal-&gt;setBeginText(&quot;&lt;sym&gt;keyboardPedalPed&lt;/sym&gt;&quot;);</a>
<a name="ln1415">      pedal-&gt;setContinueText(&quot;(&lt;sym&gt;keyboardPedalPed&lt;/sym&gt;)&quot;);</a>
<a name="ln1416">      pedal-&gt;setEndHookType(HookType::HOOK_90);</a>
<a name="ln1417">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1418"> </a>
<a name="ln1419">      pedal = new Pedal(gscore);</a>
<a name="ln1420">      pedal-&gt;setLen(w);</a>
<a name="ln1421">      pedal-&gt;setBeginText(&quot;&lt;sym&gt;keyboardPedalPed&lt;/sym&gt;&quot;);</a>
<a name="ln1422">      pedal-&gt;setContinueText(&quot;(&lt;sym&gt;keyboardPedalPed&lt;/sym&gt;)&quot;);</a>
<a name="ln1423">      pedal-&gt;setEndText(&quot;&lt;sym&gt;keyboardPedalUp&lt;/sym&gt;&quot;);</a>
<a name="ln1424">      pedal-&gt;setLineVisible(false);</a>
<a name="ln1425">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1426"> </a>
<a name="ln1427">      pedal = new Pedal(gscore);</a>
<a name="ln1428">      pedal-&gt;setLen(w);</a>
<a name="ln1429">      pedal-&gt;setBeginHookType(HookType::HOOK_90);</a>
<a name="ln1430">      pedal-&gt;setEndHookType(HookType::HOOK_90);</a>
<a name="ln1431">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1432"> </a>
<a name="ln1433">      pedal = new Pedal(gscore);</a>
<a name="ln1434">      pedal-&gt;setLen(w);</a>
<a name="ln1435">      pedal-&gt;setBeginHookType(HookType::HOOK_90);</a>
<a name="ln1436">      pedal-&gt;setEndHookType(HookType::HOOK_45);</a>
<a name="ln1437">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1438"> </a>
<a name="ln1439">      pedal = new Pedal(gscore);</a>
<a name="ln1440">      pedal-&gt;setLen(w);</a>
<a name="ln1441">      pedal-&gt;setBeginHookType(HookType::HOOK_45);</a>
<a name="ln1442">      pedal-&gt;setEndHookType(HookType::HOOK_45);</a>
<a name="ln1443">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1444"> </a>
<a name="ln1445">      pedal = new Pedal(gscore);</a>
<a name="ln1446">      pedal-&gt;setLen(w);</a>
<a name="ln1447">      pedal-&gt;setBeginHookType(HookType::HOOK_45);</a>
<a name="ln1448">      pedal-&gt;setEndHookType(HookType::HOOK_90);</a>
<a name="ln1449">      sp-&gt;append(pedal, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pedal&quot;));</a>
<a name="ln1450"> </a>
<a name="ln1451">      for (int i = 0; i &lt; trillTableSize(); i++) {</a>
<a name="ln1452">            Trill* trill = new Trill(gscore);</a>
<a name="ln1453">            trill-&gt;setTrillType(trillTable[i].type);</a>
<a name="ln1454">            trill-&gt;setLen(w);</a>
<a name="ln1455">            sp-&gt;append(trill, trillTable[i].userName);</a>
<a name="ln1456">            }</a>
<a name="ln1457"> </a>
<a name="ln1458">      TextLine* textLine = new TextLine(gscore);</a>
<a name="ln1459">      textLine-&gt;setLen(w);</a>
<a name="ln1460">      textLine-&gt;setBeginText(&quot;VII&quot;);</a>
<a name="ln1461">      textLine-&gt;setEndHookType(HookType::HOOK_90);</a>
<a name="ln1462">      sp-&gt;append(textLine, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Text line&quot;));</a>
<a name="ln1463"> </a>
<a name="ln1464">      TextLine* line = new TextLine(gscore);</a>
<a name="ln1465">      line-&gt;setLen(w);</a>
<a name="ln1466">      line-&gt;setDiagonal(true);</a>
<a name="ln1467">      sp-&gt;append(line, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Line&quot;));</a>
<a name="ln1468"> </a>
<a name="ln1469">      Ambitus* a = new Ambitus(gscore);</a>
<a name="ln1470">      sp-&gt;append(a, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Ambitus&quot;));</a>
<a name="ln1471"> </a>
<a name="ln1472">      LetRing* letRing = new LetRing(gscore);</a>
<a name="ln1473">      letRing-&gt;setLen(w);</a>
<a name="ln1474">      sp-&gt;append(letRing, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Let Ring&quot;));</a>
<a name="ln1475"> </a>
<a name="ln1476">      for (int i = 0; i &lt; vibratoTableSize(); i++) {</a>
<a name="ln1477">            Vibrato* vibrato = new Vibrato(gscore);</a>
<a name="ln1478">            vibrato-&gt;setVibratoType(vibratoTable[i].type);</a>
<a name="ln1479">            vibrato-&gt;setLen(w);</a>
<a name="ln1480">            sp-&gt;append(vibrato, vibratoTable[i].userName);</a>
<a name="ln1481">            }</a>
<a name="ln1482"> </a>
<a name="ln1483">      PalmMute* pm = new PalmMute(gscore);</a>
<a name="ln1484">      pm-&gt;setLen(w);</a>
<a name="ln1485">      sp-&gt;append(pm, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Palm Mute&quot;));</a>
<a name="ln1486"> </a>
<a name="ln1487">      return sp;</a>
<a name="ln1488">      }</a>
<a name="ln1489"> </a>
<a name="ln1490">//---------------------------------------------------------</a>
<a name="ln1491">//   newTempoPalettePanel</a>
<a name="ln1492">//---------------------------------------------------------</a>
<a name="ln1493"> </a>
<a name="ln1494">PalettePanel* MuseScore::newTempoPalettePanel(bool defaultPalettePanel)</a>
<a name="ln1495">      {</a>
<a name="ln1496">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Tempo);</a>
<a name="ln1497">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tempo&quot;));</a>
<a name="ln1498">      sp-&gt;setMag(0.65);</a>
<a name="ln1499">      if (defaultPalettePanel)</a>
<a name="ln1500">            sp-&gt;setGrid(66, 28);</a>
<a name="ln1501">      else</a>
<a name="ln1502">            sp-&gt;setGrid(116, 28);</a>
<a name="ln1503">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1504"> </a>
<a name="ln1505">      static const TempoPattern tps[] = {</a>
<a name="ln1506">            TempoPattern(&quot;&lt;sym&gt;metNoteHalfUp&lt;/sym&gt; = 80&quot;,    80.0/ 30.0, false, false, true, true, false),                // 1/2</a>
<a name="ln1507">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = 80&quot;, 80.0/ 60.0, false, false, true, true, false),                // 1/4</a>
<a name="ln1508">            TempoPattern(&quot;&lt;sym&gt;metNote8thUp&lt;/sym&gt; = 80&quot;,     80.0/120.0, false, false, true, true, false),                // 1/8</a>
<a name="ln1509">            TempoPattern(&quot;&lt;sym&gt;metNoteHalfUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;,    120/ 30.0, false, false, true, false, false),   // dotted 1/2</a>
<a name="ln1510">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;, 120/ 60.0, false, false, true, true, false),   // dotted 1/4</a>
<a name="ln1511">            TempoPattern(&quot;&lt;sym&gt;metNote8thUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;,     120/120.0, false, false, true, false, false),   // dotted 1/8</a>
<a name="ln1512"> </a>
<a name="ln1513">            TempoPattern(&quot;Grave&quot;,             35.0/60.0, false, true, false, false, false),</a>
<a name="ln1514">            TempoPattern(&quot;Largo&quot;,             50.0/60.0, false, true, false, false, false),</a>
<a name="ln1515">            TempoPattern(&quot;Lento&quot;,             52.5/60.0, false, true, false, false, false),</a>
<a name="ln1516">            TempoPattern(&quot;Larghetto&quot;,         63.0/60.0, false, true, false, false, true),</a>
<a name="ln1517">            TempoPattern(&quot;Adagio&quot;,            71.0/60.0, false, true, false, false, false),</a>
<a name="ln1518">            TempoPattern(&quot;Andante&quot;,           92.0/60.0, false, true, false, false, false),</a>
<a name="ln1519">            TempoPattern(&quot;Andantino&quot;,         94.0/60.0, false, true, false, false, true),</a>
<a name="ln1520">            TempoPattern(&quot;Moderato&quot;,         114.0/60.0, false, true, false, false, false),</a>
<a name="ln1521">            TempoPattern(&quot;Allegretto&quot;,       116.0/60.0, false, true, false, false, false),</a>
<a name="ln1522">            TempoPattern(&quot;Allegro moderato&quot;, 118.0/60.0, false, true, false, false, true),</a>
<a name="ln1523">            TempoPattern(&quot;Allegro&quot;,          144.0/60.0, false, true, false, false, false),</a>
<a name="ln1524">            TempoPattern(&quot;Vivace&quot;,           172.0/60.0, false, true, false, false, false),</a>
<a name="ln1525">            TempoPattern(&quot;Presto&quot;,           187.0/60.0, false, true, false, false, false),</a>
<a name="ln1526">            TempoPattern(&quot;Prestissimo&quot;,      200.0/60.0, false, true, false, false, true),</a>
<a name="ln1527"> </a>
<a name="ln1528">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = &lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt;&quot;, 3.0/2.0, true, false, true, false, false),</a>
<a name="ln1529">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = &lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&quot;, 2.0/3.0, true, false, true, false, false),</a>
<a name="ln1530">            TempoPattern(&quot;&lt;sym&gt;metNoteHalfUp&lt;/sym&gt; = &lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&quot;,    1.0/2.0, true, false, true, false, false),</a>
<a name="ln1531">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = &lt;sym&gt;metNoteHalfUp&lt;/sym&gt;&quot;,    2.0/1.0, true, false, true, false, false),</a>
<a name="ln1532">            TempoPattern(&quot;&lt;sym&gt;metNote8thUp&lt;/sym&gt; = &lt;sym&gt;metNote8thUp&lt;/sym&gt;&quot;,         1.0/1.0, true, false, true, false, false),</a>
<a name="ln1533">            TempoPattern(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = &lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&quot;, 1.0/1.0, true, false, true, false, false),</a>
<a name="ln1534">            };</a>
<a name="ln1535">      for (TempoPattern tp : tps) {</a>
<a name="ln1536">            TempoText* tt = new TempoText(gscore);</a>
<a name="ln1537">            tt-&gt;setFollowText(tp.followText);</a>
<a name="ln1538">            tt-&gt;setXmlText(tp.pattern);</a>
<a name="ln1539">            if (tp.relative) {</a>
<a name="ln1540">                  tt-&gt;setRelative(tp.f);</a>
<a name="ln1541">                  sp-&gt;append(tt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Metric modulation&quot;), QString(), 1.5);</a>
<a name="ln1542">                  }</a>
<a name="ln1543">            else if (tp.italian) {</a>
<a name="ln1544">                  tt-&gt;setTempo(tp.f);</a>
<a name="ln1545">                  sp-&gt;append(tt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tempo text&quot;), QString(), 1.3);</a>
<a name="ln1546">                  }</a>
<a name="ln1547">            else {</a>
<a name="ln1548">                  tt-&gt;setTempo(tp.f);</a>
<a name="ln1549">                  sp-&gt;append(tt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tempo text&quot;), QString(), 1.5);</a>
<a name="ln1550">                  }</a>
<a name="ln1551">            }</a>
<a name="ln1552">      sp-&gt;setMoreElements(false);</a>
<a name="ln1553"> </a>
<a name="ln1554">      return sp;</a>
<a name="ln1555">      }</a>
<a name="ln1556"> </a>
<a name="ln1557">//---------------------------------------------------------</a>
<a name="ln1558">//   newTextPalettePanel</a>
<a name="ln1559">//---------------------------------------------------------</a>
<a name="ln1560"> </a>
<a name="ln1561">PalettePanel* MuseScore::newTextPalettePanel(bool defaultPalettePanel)</a>
<a name="ln1562">      {</a>
<a name="ln1563">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::Text);</a>
<a name="ln1564">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Text&quot;));</a>
<a name="ln1565">      sp-&gt;setMag(0.85);</a>
<a name="ln1566">      sp-&gt;setGrid(84, 28);</a>
<a name="ln1567">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1568"> </a>
<a name="ln1569">      StaffText* st = new StaffText(gscore);</a>
<a name="ln1570">      st-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff Text&quot;));</a>
<a name="ln1571">      sp-&gt;append(st, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff text&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1572"> </a>
<a name="ln1573">      st = new StaffText(gscore, Tid::EXPRESSION);</a>
<a name="ln1574">      st-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Expression&quot;));</a>
<a name="ln1575">      st-&gt;setPlacement(Placement::BELOW);</a>
<a name="ln1576">      st-&gt;setPropertyFlags(Pid::PLACEMENT, PropertyFlags::UNSTYLED);</a>
<a name="ln1577">      sp-&gt;append(st, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Expression text&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1578"> </a>
<a name="ln1579">      InstrumentChange* is = new InstrumentChange(gscore);</a>
<a name="ln1580">      is-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Change Instr.&quot;));</a>
<a name="ln1581">      sp-&gt;append(is, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Instrument change&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1582"> </a>
<a name="ln1583">      StaffTypeChange* stc = new StaffTypeChange(gscore);</a>
<a name="ln1584">      sp-&gt;append(stc, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Staff type change&quot;));</a>
<a name="ln1585"> </a>
<a name="ln1586">      RehearsalMark* rhm = new RehearsalMark(gscore);</a>
<a name="ln1587">      rhm-&gt;setXmlText(&quot;B1&quot;);</a>
<a name="ln1588">      sp-&gt;append(rhm, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Rehearsal mark&quot;));</a>
<a name="ln1589"> </a>
<a name="ln1590">      SystemText* stxt = new SystemText(gscore, Tid::TEMPO);</a>
<a name="ln1591">      stxt-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Swing&quot;));</a>
<a name="ln1592">      stxt-&gt;setSwing(true);</a>
<a name="ln1593">      sp-&gt;append(stxt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Swing&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1594"> </a>
<a name="ln1595">      stxt = new SystemText(gscore, Tid::TEMPO);</a>
<a name="ln1596">      /*: System text to switch from swing rhythm back to straight rhythm */</a>
<a name="ln1597">      stxt-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Straight&quot;));</a>
<a name="ln1598">      // need to be true to enable the &quot;Off&quot; option</a>
<a name="ln1599">      stxt-&gt;setSwing(true);</a>
<a name="ln1600">      // 0 (swingUnit) turns of swing; swingRatio is set to default</a>
<a name="ln1601">      stxt-&gt;setSwingParameters(0, stxt-&gt;score()-&gt;styleI(Sid::swingRatio));</a>
<a name="ln1602">      /*: System text to switch from swing rhythm back to straight rhythm */</a>
<a name="ln1603">      sp-&gt;append(stxt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Straight&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1604"> </a>
<a name="ln1605">      stxt = new SystemText(gscore);</a>
<a name="ln1606">      stxt-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;System Text&quot;));</a>
<a name="ln1607">      sp-&gt;append(stxt, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;System text&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1608"> </a>
<a name="ln1609">      if (!defaultPalettePanel) {</a>
<a name="ln1610">            StaffText* pz = new StaffText(gscore);</a>
<a name="ln1611">            pz-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;pizz.&quot;));</a>
<a name="ln1612">            pz-&gt;setChannelName(0, &quot;pizzicato&quot;);</a>
<a name="ln1613">            sp-&gt;append(pz, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Pizzicato&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1614"> </a>
<a name="ln1615">            StaffText* ar = new StaffText(gscore);</a>
<a name="ln1616">            ar-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;arco&quot;));</a>
<a name="ln1617">            ar-&gt;setChannelName(0, &quot;arco&quot;);</a>
<a name="ln1618">            sp-&gt;append(ar, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Arco&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1619"> </a>
<a name="ln1620">            StaffText* tm = new StaffText(gscore, Tid::EXPRESSION);</a>
<a name="ln1621">            tm-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;tremolo&quot;));</a>
<a name="ln1622">            tm-&gt;setChannelName(0, &quot;tremolo&quot;);</a>
<a name="ln1623">            sp-&gt;append(tm, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Tremolo&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1624"> </a>
<a name="ln1625">            StaffText* mu = new StaffText(gscore);</a>
<a name="ln1626">            /*: For brass instruments: staff text that prescribes to use mute while playing, see https://en.wikipedia.org/wiki/Mute_(music) */</a>
<a name="ln1627">            mu-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;mute&quot;));</a>
<a name="ln1628">            mu-&gt;setChannelName(0, &quot;mute&quot;);</a>
<a name="ln1629">            /*: For brass instruments: staff text that prescribes to use mute while playing, see https://en.wikipedia.org/wiki/Mute_(music) */</a>
<a name="ln1630">            sp-&gt;append(mu, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Mute&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1631"> </a>
<a name="ln1632">            StaffText* no = new StaffText(gscore);</a>
<a name="ln1633">            /*: For brass instruments: staff text that prescribes to play without mute, see https://en.wikipedia.org/wiki/Mute_(music) */</a>
<a name="ln1634">            no-&gt;setXmlText(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;open&quot;));</a>
<a name="ln1635">            no-&gt;setChannelName(0, &quot;open&quot;);</a>
<a name="ln1636">            /*: For brass instruments: staff text that prescribes to play without mute, see https://en.wikipedia.org/wiki/Mute_(music) */</a>
<a name="ln1637">            sp-&gt;append(no, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Open&quot;))-&gt;setElementTranslated(true);</a>
<a name="ln1638">            }</a>
<a name="ln1639"> </a>
<a name="ln1640">      return sp;</a>
<a name="ln1641">      }</a>
<a name="ln1642"> </a>
<a name="ln1643">//---------------------------------------------------------</a>
<a name="ln1644">//   newTimePalettePanel</a>
<a name="ln1645">//    create default time signature palette</a>
<a name="ln1646">//---------------------------------------------------------</a>
<a name="ln1647"> </a>
<a name="ln1648">PalettePanel* MuseScore::newTimePalettePanel()</a>
<a name="ln1649">      {</a>
<a name="ln1650">      struct TS {</a>
<a name="ln1651">            int numerator;</a>
<a name="ln1652">            int denominator;</a>
<a name="ln1653">            TimeSigType type;</a>
<a name="ln1654">            QString name;</a>
<a name="ln1655">            };</a>
<a name="ln1656"> </a>
<a name="ln1657">      TS tsList[] = {</a>
<a name="ln1658">            { 2,  4, TimeSigType::NORMAL, &quot;2/4&quot; },</a>
<a name="ln1659">            { 3,  4, TimeSigType::NORMAL, &quot;3/4&quot; },</a>
<a name="ln1660">            { 4,  4, TimeSigType::NORMAL, &quot;4/4&quot; },</a>
<a name="ln1661">            { 5,  4, TimeSigType::NORMAL, &quot;5/4&quot; },</a>
<a name="ln1662">            { 6,  4, TimeSigType::NORMAL, &quot;6/4&quot; },</a>
<a name="ln1663">            { 3,  8, TimeSigType::NORMAL, &quot;3/8&quot; },</a>
<a name="ln1664">            { 6,  8, TimeSigType::NORMAL, &quot;6/8&quot; },</a>
<a name="ln1665">            { 7,  8, TimeSigType::NORMAL, &quot;7/8&quot; },</a>
<a name="ln1666">            { 9,  8, TimeSigType::NORMAL, &quot;9/8&quot; },</a>
<a name="ln1667">            { 12, 8, TimeSigType::NORMAL, &quot;12/8&quot; },</a>
<a name="ln1668">            { 4,  4, TimeSigType::FOUR_FOUR,  QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;4/4 common time&quot;) },</a>
<a name="ln1669">            { 2,  2, TimeSigType::ALLA_BREVE, QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;2/2 alla breve&quot;) },</a>
<a name="ln1670">            { 2,  2, TimeSigType::NORMAL, &quot;2/2&quot; },</a>
<a name="ln1671">            { 3,  2, TimeSigType::NORMAL, &quot;3/2&quot; },</a>
<a name="ln1672">            { 4,  2, TimeSigType::NORMAL, &quot;4/2&quot; },</a>
<a name="ln1673">            };</a>
<a name="ln1674"> </a>
<a name="ln1675">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::TimeSig);</a>
<a name="ln1676">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Time Signatures&quot;));</a>
<a name="ln1677">      sp-&gt;setMag(.8);</a>
<a name="ln1678">      sp-&gt;setGrid(42, 38);</a>
<a name="ln1679"> </a>
<a name="ln1680">      for (unsigned i = 0; i &lt; sizeof(tsList)/sizeof(*tsList); ++i) {</a>
<a name="ln1681">            TimeSig* ts;</a>
<a name="ln1682">            ts = new TimeSig(gscore);</a>
<a name="ln1683">            ts-&gt;setSig(Fraction(tsList[i].numerator, tsList[i].denominator), tsList[i].type);</a>
<a name="ln1684">            sp-&gt;append(ts, tsList[i].name);</a>
<a name="ln1685">            }</a>
<a name="ln1686">      return sp;</a>
<a name="ln1687">      }</a>
<a name="ln1688"> </a>
<a name="ln1689">//-----------------------------------</a>
<a name="ln1690">//    newFretboardDiagramPalettePanel</a>
<a name="ln1691">//-----------------------------------</a>
<a name="ln1692"> </a>
<a name="ln1693">PalettePanel* MuseScore::newFretboardDiagramPalettePanel()</a>
<a name="ln1694">      {</a>
<a name="ln1695">      PalettePanel* sp = new PalettePanel(PalettePanel::Type::FretboardDiagram);</a>
<a name="ln1696">      sp-&gt;setName(QT_TRANSLATE_NOOP(&quot;Palette&quot;, &quot;Fretboard Diagrams&quot;));</a>
<a name="ln1697">      sp-&gt;setGrid(42, 45);</a>
<a name="ln1698">      sp-&gt;setDrawGrid(true);</a>
<a name="ln1699"> </a>
<a name="ln1700">      FretDiagram* fret = FretDiagram::fromString(gscore, &quot;X32O1O&quot;);</a>
<a name="ln1701">      fret-&gt;setHarmony(&quot;C&quot;);</a>
<a name="ln1702">      sp-&gt;append(fret, &quot;C&quot;);</a>
<a name="ln1703">      fret = FretDiagram::fromString(gscore, &quot;X-554-&quot;);</a>
<a name="ln1704">      fret-&gt;setHarmony(&quot;Cm&quot;);</a>
<a name="ln1705">      sp-&gt;append(fret, &quot;Cm&quot;);</a>
<a name="ln1706">      fret = FretDiagram::fromString(gscore, &quot;X3231O&quot;);</a>
<a name="ln1707">      fret-&gt;setHarmony(&quot;C7&quot;);</a>
<a name="ln1708">      sp-&gt;append(fret, &quot;C7&quot;);</a>
<a name="ln1709"> </a>
<a name="ln1710">      fret = FretDiagram::fromString(gscore, &quot;XXO232&quot;);</a>
<a name="ln1711">      fret-&gt;setHarmony(&quot;D&quot;);</a>
<a name="ln1712">      sp-&gt;append(fret, &quot;D&quot;);</a>
<a name="ln1713">      fret = FretDiagram::fromString(gscore, &quot;XXO231&quot;);</a>
<a name="ln1714">      fret-&gt;setHarmony(&quot;Dm&quot;);</a>
<a name="ln1715">      sp-&gt;append(fret, &quot;Dm&quot;);</a>
<a name="ln1716">      fret = FretDiagram::fromString(gscore, &quot;XXO212&quot;);</a>
<a name="ln1717">      fret-&gt;setHarmony(&quot;D7&quot;);</a>
<a name="ln1718">      sp-&gt;append(fret, &quot;D7&quot;);</a>
<a name="ln1719"> </a>
<a name="ln1720">      fret = FretDiagram::fromString(gscore, &quot;O221OO&quot;);</a>
<a name="ln1721">      fret-&gt;setHarmony(&quot;E&quot;);</a>
<a name="ln1722">      sp-&gt;append(fret, &quot;E&quot;);</a>
<a name="ln1723">      fret = FretDiagram::fromString(gscore, &quot;O22OOO&quot;);</a>
<a name="ln1724">      fret-&gt;setHarmony(&quot;Em&quot;);</a>
<a name="ln1725">      sp-&gt;append(fret, &quot;Em&quot;);</a>
<a name="ln1726">      fret = FretDiagram::fromString(gscore, &quot;O2O1OO&quot;);</a>
<a name="ln1727">      fret-&gt;setHarmony(&quot;E7&quot;);</a>
<a name="ln1728">      sp-&gt;append(fret, &quot;E7&quot;);</a>
<a name="ln1729"> </a>
<a name="ln1730">      fret = FretDiagram::fromString(gscore, &quot;-332--&quot;);</a>
<a name="ln1731">      fret-&gt;setHarmony(&quot;F&quot;);</a>
<a name="ln1732">      sp-&gt;append(fret, &quot;F&quot;);</a>
<a name="ln1733">      fret = FretDiagram::fromString(gscore, &quot;-33---&quot;);</a>
<a name="ln1734">      fret-&gt;setHarmony(&quot;Fm&quot;);</a>
<a name="ln1735">      sp-&gt;append(fret, &quot;Fm&quot;);</a>
<a name="ln1736">      fret = FretDiagram::fromString(gscore, &quot;-3-2--&quot;);</a>
<a name="ln1737">      fret-&gt;setHarmony(&quot;F7&quot;);</a>
<a name="ln1738">      sp-&gt;append(fret, &quot;F7&quot;);</a>
<a name="ln1739"> </a>
<a name="ln1740">      fret = FretDiagram::fromString(gscore, &quot;32OOO3&quot;);</a>
<a name="ln1741">      fret-&gt;setHarmony(&quot;G&quot;);</a>
<a name="ln1742">      sp-&gt;append(fret, &quot;G&quot;);</a>
<a name="ln1743">      fret = FretDiagram::fromString(gscore, &quot;-55---&quot;);</a>
<a name="ln1744">      fret-&gt;setHarmony(&quot;Gm&quot;);</a>
<a name="ln1745">      sp-&gt;append(fret, &quot;Gm&quot;);</a>
<a name="ln1746">      fret = FretDiagram::fromString(gscore, &quot;32OOO1&quot;);</a>
<a name="ln1747">      fret-&gt;setHarmony(&quot;G7&quot;);</a>
<a name="ln1748">      sp-&gt;append(fret, &quot;G7&quot;);</a>
<a name="ln1749"> </a>
<a name="ln1750">      fret = FretDiagram::fromString(gscore, &quot;XO222O&quot;);</a>
<a name="ln1751">      fret-&gt;setHarmony(&quot;A&quot;);</a>
<a name="ln1752">      sp-&gt;append(fret, &quot;A&quot;);</a>
<a name="ln1753">      fret = FretDiagram::fromString(gscore, &quot;XO221O&quot;);</a>
<a name="ln1754">      fret-&gt;setHarmony(&quot;Am&quot;);</a>
<a name="ln1755">      sp-&gt;append(fret, &quot;Am&quot;);</a>
<a name="ln1756">      fret = FretDiagram::fromString(gscore, &quot;XO2O2O&quot;);</a>
<a name="ln1757">      fret-&gt;setHarmony(&quot;A7&quot;);</a>
<a name="ln1758">      sp-&gt;append(fret, &quot;A7&quot;);</a>
<a name="ln1759"> </a>
<a name="ln1760">      fret = FretDiagram::fromString(gscore, &quot;X-444-&quot;);</a>
<a name="ln1761">      fret-&gt;setHarmony(&quot;B&quot;);</a>
<a name="ln1762">      sp-&gt;append(fret, &quot;B&quot;);</a>
<a name="ln1763">      fret = FretDiagram::fromString(gscore, &quot;X-443-&quot;);</a>
<a name="ln1764">      fret-&gt;setHarmony(&quot;Bm&quot;);</a>
<a name="ln1765">      sp-&gt;append(fret, &quot;Bm&quot;);</a>
<a name="ln1766">      fret = FretDiagram::fromString(gscore, &quot;X212O2&quot;);</a>
<a name="ln1767">      fret-&gt;setHarmony(&quot;B7&quot;);</a>
<a name="ln1768">      sp-&gt;append(fret, &quot;B7&quot;);</a>
<a name="ln1769"> </a>
<a name="ln1770">      return sp;</a>
<a name="ln1771">      }</a>
<a name="ln1772">//########END DEBUG: new palettes #########################</a>
<a name="ln1773"> </a>
<a name="ln1774">//---------------------------------------------------------</a>
<a name="ln1775">//   setDefaultPalette</a>
<a name="ln1776">//---------------------------------------------------------</a>
<a name="ln1777"> </a>
<a name="ln1778">void MuseScore::setDefaultPalette()</a>
<a name="ln1779">      {</a>
<a name="ln1780">      std::unique_ptr&lt;PaletteTree&gt; defaultPalette(new PaletteTree);</a>
<a name="ln1781"> </a>
<a name="ln1782">      defaultPalette-&gt;append(newClefsPalettePanel(true));</a>
<a name="ln1783">      defaultPalette-&gt;append(newKeySigPalettePanel());</a>
<a name="ln1784">      defaultPalette-&gt;append(newTimePalettePanel());</a>
<a name="ln1785">      defaultPalette-&gt;append(newBracketsPalettePanel());</a>
<a name="ln1786">      defaultPalette-&gt;append(newAccidentalsPalettePanel(true));</a>
<a name="ln1787">      defaultPalette-&gt;append(newArticulationsPalettePanel());</a>
<a name="ln1788">      defaultPalette-&gt;append(newOrnamentsPalettePanel());</a>
<a name="ln1789">      defaultPalette-&gt;append(newBreathPalettePanel());</a>
<a name="ln1790">      defaultPalette-&gt;append(newGraceNotePalettePanel());</a>
<a name="ln1791">      defaultPalette-&gt;append(newNoteHeadsPalettePanel());</a>
<a name="ln1792">      defaultPalette-&gt;append(newLinesPalettePanel());</a>
<a name="ln1793">      defaultPalette-&gt;append(newBarLinePalettePanel());</a>
<a name="ln1794">      defaultPalette-&gt;append(newArpeggioPalettePanel());</a>
<a name="ln1795">      defaultPalette-&gt;append(newTremoloPalettePanel());</a>
<a name="ln1796">      defaultPalette-&gt;append(newTextPalettePanel(true));</a>
<a name="ln1797">      defaultPalette-&gt;append(newTempoPalettePanel(true));</a>
<a name="ln1798">      defaultPalette-&gt;append(newDynamicsPalettePanel(true));</a>
<a name="ln1799">      defaultPalette-&gt;append(newFingeringPalettePanel());</a>
<a name="ln1800">      defaultPalette-&gt;append(newRepeatsPalettePanel());</a>
<a name="ln1801">      defaultPalette-&gt;append(newFretboardDiagramPalettePanel());</a>
<a name="ln1802">      defaultPalette-&gt;append(newAccordionPalettePanel());</a>
<a name="ln1803">      defaultPalette-&gt;append(newBagpipeEmbellishmentPalettePanel());</a>
<a name="ln1804">      defaultPalette-&gt;append(newBreaksPalettePanel());</a>
<a name="ln1805">      defaultPalette-&gt;append(newFramePalettePanel());</a>
<a name="ln1806">      defaultPalette-&gt;append(newBeamPalettePanel());</a>
<a name="ln1807"> </a>
<a name="ln1808">      mscore-&gt;getPaletteWorkspace()-&gt;setUserPaletteTree(std::move(defaultPalette));</a>
<a name="ln1809">      }</a>
<a name="ln1810"> </a>
<a name="ln1811">//---------------------------------------------------------</a>
<a name="ln1812">//   addTempo</a>
<a name="ln1813">//---------------------------------------------------------</a>
<a name="ln1814"> </a>
<a name="ln1815">void MuseScore::addTempo()</a>
<a name="ln1816">      {</a>
<a name="ln1817">      ChordRest* cr = cs-&gt;getSelectedChordRest();</a>
<a name="ln1818">      if (!cr)</a>
<a name="ln1819">            return;</a>
<a name="ln1820">//      double bps = 2.0;</a>
<a name="ln1821"> </a>
<a name="ln1822">      SigEvent event = cs-&gt;sigmap()-&gt;timesig(cr-&gt;tick());</a>
<a name="ln1823">      Fraction f = event.nominal();</a>
<a name="ln1824">      QString text(&quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = 80&quot;);</a>
<a name="ln1825">      switch (f.denominator()) {</a>
<a name="ln1826">            case 1:</a>
<a name="ln1827">                  text = &quot;&lt;sym&gt;metNoteWhole&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1828">                  break;</a>
<a name="ln1829">            case 2:</a>
<a name="ln1830">                  text = &quot;&lt;sym&gt;metNoteHalfUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1831">                  break;</a>
<a name="ln1832">            case 4:</a>
<a name="ln1833">                  text = &quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1834">                  break;</a>
<a name="ln1835">            case 8:</a>
<a name="ln1836">                  if(f.numerator() % 3 == 0)</a>
<a name="ln1837">                        text = &quot;&lt;sym&gt;metNoteQuarterUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1838">                  else</a>
<a name="ln1839">                        text = &quot;&lt;sym&gt;metNote8thUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1840">                  break;</a>
<a name="ln1841">            case 16:</a>
<a name="ln1842">                  if(f.numerator() % 3 == 0)</a>
<a name="ln1843">                        text = &quot;&lt;sym&gt;metNote8thUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1844">                  else</a>
<a name="ln1845">                        text = &quot;&lt;sym&gt;metNote16thUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1846">                  break;</a>
<a name="ln1847">            case 32:</a>
<a name="ln1848">                  if(f.numerator() % 3 == 0)</a>
<a name="ln1849">                        text = &quot;&lt;sym&gt;metNote16thUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1850">                  else</a>
<a name="ln1851">                        text = &quot;&lt;sym&gt;metNote32ndUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1852">                  break;</a>
<a name="ln1853">            case 64:</a>
<a name="ln1854">                  if(f.numerator() % 3 == 0)</a>
<a name="ln1855">                        text = &quot;&lt;sym&gt;metNote32ndUp&lt;/sym&gt;&lt;sym&gt;space&lt;/sym&gt;&lt;sym&gt;metAugmentationDot&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1856">                  else</a>
<a name="ln1857">                        text = &quot;&lt;sym&gt;metNote64thUp&lt;/sym&gt; = 80&quot;;</a>
<a name="ln1858">                  break;</a>
<a name="ln1859">            default:</a>
<a name="ln1860">                  break;</a>
<a name="ln1861">            }</a>
<a name="ln1862"> </a>
<a name="ln1863">      TempoText* tt = new TempoText(cs);</a>
<a name="ln1864">      cs-&gt;startCmd();</a>
<a name="ln1865">      tt-&gt;setParent(cr-&gt;segment());</a>
<a name="ln1866">      tt-&gt;setTrack(0);</a>
<a name="ln1867">      tt-&gt;setXmlText(text);</a>
<a name="ln1868">      tt-&gt;setFollowText(true);</a>
<a name="ln1869">      //tt-&gt;setTempo(bps);</a>
<a name="ln1870">      cs-&gt;undoAddElement(tt);</a>
<a name="ln1871">      cs-&gt;select(tt, SelectType::SINGLE, 0);</a>
<a name="ln1872">      cs-&gt;endCmd();</a>
<a name="ln1873">      Measure* m = tt-&gt;findMeasure();</a>
<a name="ln1874">      if (m &amp;&amp; m-&gt;hasMMRest() &amp;&amp; tt-&gt;links()) {</a>
<a name="ln1875">            Measure* mmRest = m-&gt;mmRest();</a>
<a name="ln1876">            for (ScoreElement* se : *tt-&gt;links()) {</a>
<a name="ln1877">                  TempoText* tt1 = toTempoText(se);</a>
<a name="ln1878">                  if (tt != tt1 &amp;&amp; tt1-&gt;findMeasure() == mmRest) {</a>
<a name="ln1879">                        tt = tt1;</a>
<a name="ln1880">                        break;</a>
<a name="ln1881">                        }</a>
<a name="ln1882">                  }</a>
<a name="ln1883">            }</a>
<a name="ln1884">      cv-&gt;startEditMode(tt);</a>
<a name="ln1885">      }</a>
<a name="ln1886"> </a>
<a name="ln1887">//---------------------------------------------------------</a>
<a name="ln1888">//   smuflRanges</a>
<a name="ln1889">//    read smufl ranges.json file</a>
<a name="ln1890">//---------------------------------------------------------</a>
<a name="ln1891"> </a>
<a name="ln1892">QMap&lt;QString, QStringList&gt;* smuflRanges()</a>
<a name="ln1893">      {</a>
<a name="ln1894">      static QMap&lt;QString, QStringList&gt; ranges;</a>
<a name="ln1895">      QStringList allSymbols;</a>
<a name="ln1896"> </a>
<a name="ln1897">      if (ranges.empty()) {</a>
<a name="ln1898">            QFile fi(&quot;:fonts/smufl/ranges.json&quot;);</a>
<a name="ln1899">            if (!fi.open(QIODevice::ReadOnly))</a>
<a name="ln1900">                  qDebug(&quot;ScoreFont: open ranges file &lt;%s&gt; failed&quot;, qPrintable(fi.fileName()));</a>
<a name="ln1901">            QJsonParseError error;</a>
<a name="ln1902">            QJsonObject o = QJsonDocument::fromJson(fi.readAll(), &amp;error).object();</a>
<a name="ln1903">            if (error.error != QJsonParseError::NoError)</a>
<a name="ln1904">                  qDebug(&quot;Json parse error in &lt;%s&gt;(offset: %d): %s&quot;, qPrintable(fi.fileName()),</a>
<a name="ln1905">                     error.offset, qPrintable(error.errorString()));</a>
<a name="ln1906"> </a>
<a name="ln1907">            for (auto s : o.keys()) {</a>
<a name="ln1908">                  QJsonObject range = o.value(s).toObject();</a>
<a name="ln1909">                  QString desc      = range.value(&quot;description&quot;).toString();</a>
<a name="ln1910">                  QJsonArray glyphs = range.value(&quot;glyphs&quot;).toArray();</a>
<a name="ln1911">                  if (glyphs.size() &gt; 0) {</a>
<a name="ln1912">                        QStringList glyphNames;</a>
<a name="ln1913">                        for (QJsonValue g : glyphs)</a>
<a name="ln1914">                              glyphNames.append(g.toString());</a>
<a name="ln1915">                        ranges.insert(desc, glyphNames);</a>
<a name="ln1916">                        allSymbols &lt;&lt; glyphNames;</a>
<a name="ln1917">                        }</a>
<a name="ln1918">                  }</a>
<a name="ln1919">            ranges.insert(SMUFL_ALL_SYMBOLS, allSymbols); // TODO: make translatable as well as ranges.json</a>
<a name="ln1920">            }</a>
<a name="ln1921">      return &amp;ranges;</a>
<a name="ln1922">      }</a>
<a name="ln1923">}</a>
<a name="ln1924"> </a>

</code></pre>
<div class="balloon" rel="1436"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v760/" target="_blank">V760</a> Two identical blocks of text were found. The second block begins from line 1442.</p></div>
<div class="balloon" rel="1900"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v618/" target="_blank">V618</a> It's dangerous to call the 'debug' function in such a manner, as the line being passed could contain format specification. The example of the safe code: printf("%s", str);</p></div>
<div class="balloon" rel="8"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1042/" target="_blank">V1042</a> This file is marked with copyleft license, which requires you to open the derived source code.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
